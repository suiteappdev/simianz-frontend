function fixWrapperHeight(){var headerH=62,navigationH=$("#navigation").height(),contentH=$(".content").height();navigationH>contentH&&$("#wrapper").css("min-height",navigationH+"px"),navigationH>contentH&&navigationH<$(window).height()&&$("#wrapper").css("min-height",$(window).height()-headerH+"px"),contentH>navigationH&&contentH<$(window).height()&&$("#wrapper").css("min-height",$(window).height()-headerH+"px")}function setBodySmall(){$(this).width()<769?$("body").addClass("page-small"):($("body").removeClass("page-small"),$("body").removeClass("show-sidebar"))}function configState($stateProvider,$urlRouterProvider,$compileProvider,$httpProvider){$httpProvider.interceptors.push(function($injector,$q){return rootScope=$injector.get("$rootScope"),sweetAlert=$injector.get("sweetAlert"),{request:function(config){rootScope.loading=!0,$httpProvider.defaults.withCredentials=!1,window.localStorage.token&&($httpProvider.defaults.headers.common["x-rtc-auth"]=window.localStorage.token),console.log(config,"request");for(x in config.data)"boolean"==typeof config.data[x]&&(config.data[x]+="");return config||$q.when(config)},response:function(response){return rootScope.loading=!1,response},responseError:function(rejection){switch(console.log(rejection),rejection.status){case 401:if(window.location.hash.match("login"))return $q.reject(rejection);sweetAlert.swal({title:"La sesiÃ³n ha expirado",text:"Por favor ingrese nuevamente",type:"error"},function(){window.modal&&window.modal.hide(),window.sweet&&window.sweet.hide(),window.localStorage.clear(),window.location="#/login"});break;default:return console.log($q),$q.reject(rejection)}}}}),$compileProvider.debugInfoEnabled(!0),$urlRouterProvider.otherwise("/dashboard"),$stateProvider.state("landing",{url:"/landing_page",templateUrl:"views/landing_page.html",data:{pageTitle:"Landing page",specialClass:"landing-page"}}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"loginCtrl",data:{pageTitle:"login",specialClass:"blank"}}).state("cambiar-clave",{url:"/cambiar-clave",access:{requiredAuthentication:!0},templateUrl:"views/school/cambiar-clave.html",controller:"changePasswordCtrl",data:{pageTitle:"Cambiar Clave"}}).state("dashboard",{url:"/dashboard",templateUrl:"views/dashboard.html",access:{requiredAuthentication:!0},data:{pageTitle:"Dashboard"}}).state("usuario",{url:"/usuario",access:{requiredAuthentication:!0},templateUrl:"views/school/usuario.html",data:{pageTitle:"Analytics"}}).state("estudiantes",{url:"/estudiantes",access:{requiredAuthentication:!0},templateUrl:"views/school/estudiante.html",data:{pageTitle:"Estudiantes"}}).state("acudiente",{url:"/acudientes",access:{requiredAuthentication:!0},templateUrl:"views/school/acudiente.html",data:{pageTitle:"Acudiente"}}).state("colegio",{url:"/colegio",access:{requiredAuthentication:!0},templateUrl:"views/school/colegio.html",data:{pageTitle:"Colegio"}}).state("parada",{url:"/parada",access:{requiredAuthentication:!0},templateUrl:"views/school/parada.html",data:{pageTitle:"Parada"}}).state("conductor",{url:"/conductores",access:{requiredAuthentication:!0},templateUrl:"views/school/conductor.html",data:{pageTitle:"Conductores"}}).state("monitor",{url:"/monitores",access:{requiredAuthentication:!0},templateUrl:"views/school/monitor.html",data:{pageTitle:"Monitores"}}).state("rutas",{url:"/rutas",access:{requiredAuthentication:!0},templateUrl:"views/school/rutas.html",data:{pageTitle:"Rutas"}}).state("trayecto",{url:"/trayecto",access:{requiredAuthentication:!0},templateUrl:"views/school/trayecto.html",data:{pageTitle:"Trayectos"}}).state("buses",{url:"/buses",access:{requiredAuthentication:!0},templateUrl:"views/school/bus.html",data:{pageTitle:"Buses"}}).state("asistencia",{url:"/asistencia",access:{requiredAuthentication:!0},templateUrl:"views/school/asistencia.html",data:{pageTitle:"Asistencia"}}).state("ruta-estudiante",{url:"/ruta-estudiante",access:{requiredAuthentication:!0},templateUrl:"views/school/ruta-estudiante.html",data:{pageTitle:"ruta-estudiante"}}).state("options",{url:"/options",templateUrl:"views/options.html",data:{pageTitle:"Options",pageDesc:"Example small header for demo purpose."}}).state("interface",{"abstract":!0,url:"/interface",templateUrl:"views/common/content.html",data:{pageTitle:"Interface"}}).state("interface.buttons",{url:"/buttons",templateUrl:"views/interface/buttons.html",data:{pageTitle:"Colors and Buttons",pageDesc:"The basic color palette"}}).state("interface.typography",{url:"/typography",templateUrl:"views/interface/typography.html",data:{pageTitle:"Typography",pageDesc:"The basic elements of typography"}}).state("interface.components",{url:"/components",templateUrl:"views/interface/components.html",data:{pageTitle:"Components",pageDesc:"Tabs, according, collapse and other UI components"}}).state("interface.icons",{url:"/icons",templateUrl:"views/interface/icons.html",data:{pageTitle:"Icons",pageDesc:"Two great icon libraries. Pe-icon-7-stroke and Font Awesome"}}).state("interface.panels",{url:"/panels",templateUrl:"views/interface/panels.html",data:{pageTitle:"Panels",pageDesc:"Two great icon libraries. Pe-icon-7-stroke and Font Awesome"}}).state("interface.alerts",{url:"/alerts",templateUrl:"views/interface/alerts.html",data:{pageTitle:"Alerts",pageDesc:"Notification and custom alerts"}}).state("interface.modals",{url:"/modals",templateUrl:"views/interface/modals.html",data:{pageTitle:"Modals",pageDesc:"Modal window examples"}}).state("interface.list",{url:"/list",templateUrl:"views/interface/list.html",data:{pageTitle:"Nestable list",pageDesc:"Nestable - Drag & drop hierarchical list."}}).state("interface.tour",{url:"/tour",templateUrl:"views/interface/tour.html",data:{pageTitle:"Tour",pageDesc:"The easiest way to show people how to use your website."}}).state("interface.draggable_panels",{url:"/draggable_panels",templateUrl:"views/interface/draggable_panels.html",data:{pageTitle:"Draggable panels",pageDesc:"Example page for draggable panels"}}).state("interface.code_editor",{url:"/code_editor",templateUrl:"views/interface/code_editor.html",data:{pageTitle:"Code editor",pageDesc:"Versatile text editor implemented in JavaScript for the browser."}}).state("app_views",{"abstract":!0,url:"/app_views",templateUrl:"views/common/content.html",data:{pageTitle:"App Views"}}).state("app_views.timeline",{url:"/timeline",templateUrl:"views/app_views/timeline.html",data:{pageTitle:"Timeline",pageDesc:"Present your events in timeline style."}}).state("app_views.contacts",{url:"/contacts",templateUrl:"views/app_views/contacts.html",data:{pageTitle:"Contacts",pageDesc:"Show users list in nice and color panels"}}).state("app_views.profile",{url:"/profile",templateUrl:"views/app_views/profile.html",data:{pageTitle:"Profile",pageDesc:"Show user data in clear profile design"}}).state("app_views.calendar",{url:"/calendar",templateUrl:"views/app_views/calendar.html",data:{pageTitle:"Calendar",pageDesc:"Full-sized, drag & drop event calendar."}}).state("app_views.projects",{url:"/projects",templateUrl:"views/app_views/projects.html",data:{pageTitle:"Projects",pageDesc:"List of projects."}}).state("app_views.project_detail",{url:"/project_detail",templateUrl:"views/app_views/project_detail.html",data:{pageTitle:"Project detail",pageDesc:"Special page for project detail."}}).state("app_views.app_plans",{url:"/app_plans",templateUrl:"views/app_views/app_plans.html",data:{pageTitle:"App plans",pageDesc:"Present pricing option for your app"}}).state("app_views.social_board",{url:"/social_board",templateUrl:"views/app_views/social_board.html",data:{pageTitle:"Social board",pageDesc:"Message board for social interactions."}}).state("app_views.blog",{url:"/blog",templateUrl:"views/app_views/blog.html",data:{pageTitle:"Blog",pageDesc:"Article board for blog page."}}).state("blog_details",{url:"/blog_details",templateUrl:"views/app_views/blog_details.html",data:{pageTitle:"Article",pageDesc:"Article blog page."}}).state("app_views.forum",{url:"/forum",templateUrl:"views/app_views/forum.html",data:{pageTitle:"Forum",pageDesc:"Topics board for forum page."}}).state("app_views.forum_details",{url:"/forum_details",templateUrl:"views/app_views/forum_details.html",data:{pageTitle:"Topic",pageDesc:"Topic for forum page."}}).state("app_views.gallery",{url:"/gallery",templateUrl:"views/app_views/gallery.html",data:{pageTitle:"Galery",pageDesc:"Touch-enabled, responsive and customizable image & video gallery."}}).state("app_views.notes",{url:"/notes",templateUrl:"views/app_views/notes.html",data:{pageTitle:"Notes",pageDesc:"Build notebook functionality in your app"}}).state("app_views.mailbox",{url:"/mailbox",templateUrl:"views/app_views/mailbox.html",data:{pageTitle:"Mailbox",pageDesc:"Mailbox - Email list."}}).state("app_views.faq",{url:"/faq",templateUrl:"views/app_views/faq.html",data:{pageTitle:"FAQ",pageDesc:"FAQ page - build faq/support page for your app"}}).state("app_views.email_compose",{url:"/email_compose",templateUrl:"views/app_views/email_compose.html",data:{pageTitle:"Mailbox",pageDesc:"Mailbox - Email compose."}}).state("app_views.email_view",{url:"/email_view",templateUrl:"views/app_views/email_view.html",data:{pageTitle:"Mailbox",pageDesc:"Mailbox - Email view."}}).state("app_views.invoice",{url:"/invoice",templateUrl:"views/app_views/invoice.html",data:{pageTitle:"Invoice",pageDesc:"Clean invoice template."}}).state("app_views.file_manager",{url:"/mailbox",templateUrl:"views/app_views/file_manager.html",data:{pageTitle:"File manager",pageDesc:"Show you files in a nica manager design."}}).state("app_views.search",{url:"/search",templateUrl:"views/app_views/search.html",data:{pageTitle:"Search view",pageDesc:"Use search view to show search functionality."}}).state("app_views.chat_view",{url:"/chat_view",templateUrl:"views/app_views/chat_view.html",data:{pageTitle:"Chat view",pageDesc:"Create a chat room in your app"}}).state("transitions",{"abstract":!0,url:"/transitions",templateUrl:"views/common/content_blank.html",data:{pageTitle:"Transitions"}}).state("transitions.overview",{url:"/overview",templateUrl:"views/transitions/overview.html",data:{pageTitle:"Overview of transitions Effect"}}).state("transitions.transition_one",{url:"/transition_one",templateUrl:"views/transitions/transition_one.html"}).state("transitions.transition_two",{url:"/transition_two",templateUrl:"views/transitions/transition_two.html"}).state("transitions.transition_three",{url:"/transition_three",templateUrl:"views/transitions/transition_three.html"}).state("transitions.transition_four",{url:"/transition_four",templateUrl:"views/transitions/transition_four.html"}).state("transitions.transition_five",{url:"/transition_five",templateUrl:"views/transitions/transition_five.html"}).state("charts",{"abstract":!0,url:"/charts",templateUrl:"views/common/content.html",data:{pageTitle:"Charts"}}).state("charts.flot",{url:"/flot",templateUrl:"views/charts/flot.html",data:{pageTitle:"Flot chart",pageDesc:"Flot is a pure JavaScript plotting library for jQuery, with a focus on simple usage, attractive looks and interactive features."}}).state("charts.chartjs",{url:"/chartjs",templateUrl:"views/charts/chartjs.html",data:{pageTitle:"ChartJS",pageDesc:"Simple HTML5 Charts using the canvas element"}}).state("charts.inline",{url:"/inline",templateUrl:"views/charts/inline.html",data:{pageTitle:"Inline charts",pageDesc:"Small inline charts directly in the browser using data supplied in the controller."}}).state("charts.chartist",{url:"/chartist",templateUrl:"views/charts/chartist.html",data:{pageTitle:"Chartist",pageDesc:"Chartist.js is a simple responsive charting library built with SVG."}}).state("common",{"abstract":!0,url:"/common",templateUrl:"views/common/content_empty.html",data:{pageTitle:"Common"}}).state("common.register",{url:"/register",templateUrl:"views/common_app/register.html",data:{pageTitle:"Register page",specialClass:"blank"}}).state("common.error_one",{url:"/error_one",templateUrl:"views/common_app/error_one.html",data:{pageTitle:"Error 404",specialClass:"blank"}}).state("common.error_two",{url:"/error_two",templateUrl:"views/common_app/error_two.html",data:{pageTitle:"Error 505",specialClass:"blank"}}).state("common.lock",{url:"/lock",templateUrl:"views/common_app/lock.html",data:{pageTitle:"Lock page",specialClass:"blank"}}).state("tables",{"abstract":!0,url:"/tables",templateUrl:"views/common/content.html",data:{pageTitle:"Tables"}}).state("tables.tables_design",{url:"/tables_design",templateUrl:"views/tables/tables_design.html",data:{pageTitle:"Tables design",pageDesc:"Examples of various designs of tables."}}).state("tables.ng_grid",{url:"/ng_grid",templateUrl:"views/tables/ng_grid.html",data:{pageTitle:"ngGgrid",pageDesc:"Examples of various designs of tables."}}).state("tables.datatables",{url:"/datatables",templateUrl:"views/tables/datatables.html",data:{pageTitle:"DataTables",pageDesc:"Advanced interaction controls to any HTML table"}}).state("tables.footable",{url:"/footable",templateUrl:"views/tables/footable.html",data:{pageTitle:"FooTable",pageDesc:"Advanced interaction controls to any HTML table"}}).state("forms",{"abstract":!0,url:"/forms",templateUrl:"views/common/content_small.html",data:{pageTitle:"Forms"}}).state("forms.forms_elements",{url:"/forms_elements",templateUrl:"views/forms/forms_elements.html",data:{pageTitle:"Forms elements",pageDesc:"Examples of various form controls."}}).state("forms.forms_extended",{url:"/forms_extended",templateUrl:"views/forms/forms_extended.html",data:{pageTitle:"Forms extended",pageDesc:"Examples of various extended form controls."}}).state("forms.text_editor",{url:"/text_editor",templateUrl:"views/forms/text_editor.html",data:{pageTitle:"Text editor",pageDesc:"Examples of text editor."}}).state("forms.wizard",{url:"/wizard",templateUrl:"views/forms/wizard.html",data:{pageTitle:"Wizard",pageDesc:"Build a form with wizard functionality."}}).state("forms.validation",{url:"/validation",templateUrl:"views/forms/validation.html",data:{pageTitle:"Validation",pageDesc:"Build a form with validation functionality."}}).state("grid_system",{url:"/grid_system",templateUrl:"views/grid_system.html",data:{pageTitle:"Grid system"}})}function propsFilter(){return function(items,props){var out=[];return angular.isArray(items)?items.forEach(function(item){for(var itemMatches=!1,keys=Object.keys(props),i=0;i<keys.length;i++){var prop=keys[i],text=props[prop].toLowerCase();if(-1!==item[prop].toString().toLowerCase().indexOf(text)){itemMatches=!0;break}}itemMatches&&out.push(item)}):out=items,out}}function pageTitle($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var title="DSCHOOL";toState.data&&toState.data.pageTitle&&(title="D SCHOOL | "+toState.data.pageTitle),$timeout(function(){element.text(title)})};$rootScope.$on("$stateChangeStart",listener)}}}function sideNavigation($timeout){return{restrict:"A",link:function(scope,element){element.metisMenu();var menuElement=$('#side-menu a:not([href$="\\#"])');menuElement.click(function(){$(window).width()<769&&$("body").toggleClass("show-sidebar")})}}}function minimalizaMenu($rootScope){return{restrict:"EA",template:'<div class="header-link hide-menu" ng-click="minimalize()"><i class="fa fa-bars"></i></div>',controller:function($scope,$element){$scope.minimalize=function(){$(window).width()<769?$("body").toggleClass("show-sidebar"):$("body").toggleClass("hide-sidebar")}}}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(scope,element,attrs){scope.$watch(scope.sparkData,function(){render()}),scope.$watch(scope.sparkOptions,function(){render()});var render=function(){$(element).sparkline(scope.sparkData,scope.sparkOptions)}}}}function icheck($timeout){return{restrict:"A",require:"ngModel",link:function($scope,element,$attrs,ngModel){return $timeout(function(){var value;return value=$attrs.value,$scope.$watch($attrs.ngModel,function(newValue){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(event){return"checkbox"===$(element).attr("type")&&$attrs.ngModel&&$scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)}),"radio"===$(element).attr("type")&&$attrs.ngModel?$scope.$apply(function(){return ngModel.$setViewValue(value)}):void 0})})}}}function panelTools($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/panel_tools.html",controller:function($scope,$element){$scope.showhide=function(){var hpanel=$element.closest("div.hpanel"),icon=$element.find("i:first"),body=hpanel.find("div.panel-body"),footer=hpanel.find("div.panel-footer");body.slideToggle(300),footer.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),hpanel.toggleClass("").toggleClass("panel-collapse"),$timeout(function(){hpanel.resize(),hpanel.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var hpanel=$element.closest("div.hpanel");hpanel.remove()}}}}function panelToolsFullscreen($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/panel_tools_fullscreen.html",controller:function($scope,$element){$scope.showhide=function(){var hpanel=$element.closest("div.hpanel"),icon=$element.find("i:first"),body=hpanel.find("div.panel-body"),footer=hpanel.find("div.panel-footer");body.slideToggle(300),footer.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),hpanel.toggleClass("").toggleClass("panel-collapse"),$timeout(function(){hpanel.resize(),hpanel.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var hpanel=$element.closest("div.hpanel");hpanel.remove()},$scope.fullscreen=function(){var hpanel=$element.closest("div.hpanel"),icon=$element.find("i:first");$("body").toggleClass("fullscreen-panel-mode"),icon.toggleClass("fa-expand").toggleClass("fa-compress"),hpanel.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}}}function smallHeader(){return{restrict:"A",scope:!0,controller:function($scope,$element){$scope.small=function(){var icon=$element.find("i:first"),breadcrumb=$element.find("#hbreadcrumb");$element.toggleClass("small-header"),breadcrumb.toggleClass("m-t-lg"),icon.toggleClass("fa-arrow-up").toggleClass("fa-arrow-down")}}}}function animatePanel($timeout,$state){return{restrict:"A",link:function(scope,element,attrs){var startAnimation=0,delay=.06,start=Math.abs(delay)+startAnimation;$state.current.name;attrs.effect||(attrs.effect="zoomIn"),delay=attrs.delay?attrs.delay/10:.06,attrs.child?attrs.child="."+attrs.child:attrs.child=".row > div";var panel=element.find(attrs.child);panel.addClass("opacity-0");panel.length*delay*1e3+700;$timeout(function(){panel=element.find(attrs.child),panel.addClass("stagger").addClass("animated-panel").addClass(attrs.effect);var panelsCount=panel.length+10,animateTime=panelsCount*delay*1e4/10;panel.each(function(i,elm){start+=delay;var rounded=Math.round(10*start)/10;$(elm).css("animation-delay",rounded+"s"),$(elm).removeClass("opacity-0")}),$timeout(function(){$(".stagger").css("animation",""),$(".stagger").removeClass(attrs.effect).removeClass("animated-panel").removeClass("stagger")},animateTime)})}}}function landingScrollspy(){return{restrict:"A",link:function(scope,element,attrs){element.scrollspy({target:".navbar-fixed-top",offset:80})}}}function focus($timeout){return{scope:{trigger:"@focus"},link:function(scope,element){scope.$watch("trigger",function(value){"true"===value&&$timeout(function(){element[0].focus()})})}}}function planViaje(){function ctrl($scope,$API,$rootScope){$scope.ngModel||($scope.ngModel=[],$scope.chkall=!1),$scope.init&&($scope.ngModel[0]={},$scope.ngModel[0].lunes={},$scope.ngModel[0].lunes.go=$scope.init,$scope.ngModel[0].lunes.back=$scope.init,$scope.ngModel[1]={},$scope.ngModel[1].martes={},$scope.ngModel[1].martes.go=$scope.init,$scope.ngModel[1].martes.back=$scope.init,$scope.ngModel[2]={},$scope.ngModel[2].miercoles={},$scope.ngModel[2].miercoles.go=$scope.init,$scope.ngModel[2].miercoles.back=$scope.init,$scope.ngModel[3]={},$scope.ngModel[3].jueves={},$scope.ngModel[3].jueves.go=$scope.init,$scope.ngModel[3].jueves.back=$scope.init,$scope.ngModel[4]={},$scope.ngModel[4].viernes={},$scope.ngModel[4].viernes.go=$scope.init,$scope.ngModel[4].viernes.back=$scope.init,$scope.ngModel[5]={},$scope.ngModel[5].sabado={},$scope.ngModel[5].sabado.go=$scope.init,$scope.ngModel[5].sabado.back=$scope.init,$scope.ngModel[6]={},$scope.ngModel[6].domingo={},$scope.ngModel[6].domingo.go=$scope.init,$scope.ngModel[6].domingo.back=$scope.init),$scope.checkAll=function(){$scope.ngModel[0]={},$scope.ngModel[0].lunes={},$scope.ngModel[0].lunes.go=this.chkall,$scope.ngModel[0].lunes.back=this.chkall,$scope.ngModel[1]={},$scope.ngModel[1].martes={},$scope.ngModel[1].martes.go=this.chkall,$scope.ngModel[1].martes.back=this.chkall,$scope.ngModel[2]={},$scope.ngModel[2].miercoles={},$scope.ngModel[2].miercoles.go=this.chkall,$scope.ngModel[2].miercoles.back=this.chkall,$scope.ngModel[3]={},$scope.ngModel[3].jueves={},$scope.ngModel[3].jueves.go=this.chkall,$scope.ngModel[3].jueves.back=this.chkall,$scope.ngModel[4]={},$scope.ngModel[4].viernes={},$scope.ngModel[4].viernes.go=this.chkall,$scope.ngModel[4].viernes.back=this.chkall,$scope.ngModel[5]={},$scope.ngModel[5].sabado={},$scope.ngModel[5].sabado.go=this.chkall,$scope.ngModel[5].sabado.back=this.chkall,$scope.ngModel[6]={},$scope.ngModel[6].domingo={},$scope.ngModel[6].domingo.go=this.chkall,$scope.ngModel[6].domingo.back=this.chkall}}return{restrict:"EA",controller:ctrl,scope:{ngModel:"=",init:"="},templateUrl:"views/interface/plan_viaje.html",link:function($scope,$element,$attr){}}}function rutaField(){function ctrl($scope,$API,$modalService){$API.ruta().get().success(function(res){$scope.rutas=res.filter(function(ruta){return ruta.nombre=ruta.data.nombre,!0})}),$scope.myConfig={create:!1,plugins:["remove_button"],searchField:["nombre"],valueField:$scope.key,labelField:$scope.label,placeholder:"Seleccione las rutas"},$scope.crearRuta=function(){$modalService.show({templateUrl:"views/modal/crear-ruta.html",size:"md",scope:$scope},function($scope){return $scope.formRuta.$invalid?void $modalService.incompleteForm():void $API.ruta().post($scope.form).success(function(res){res&&($scope.rutas.push(angular.extend(res,{nombre:res.data.nombre})),$scope.$parent.ngModel=res._id,$scope.$close(),delete $scope.form.data)})})}}return{restrict:"EA",controller:ctrl,scope:{key:"@?",label:"@",ngModel:"="},template:'<div class="form-group" ng-show="rutas.length == 0"><div class="col-lg-12"><div ><a ng-click="crearRuta()" class="btn btn-success btn-block"><i style="margin-right:5px;" class="glyphicon glyphicon-road"></i>Crear Ruta<a/></div></div></div><div ng-hide="rutas.length == 0"><selectize  config="myConfig" options="rutas" ng-model="ngModel"></selectize></div>',link:function($scope,$element,$attr){}}}function monitorField(){function ctrl($scope,$API){$API.user().get().success(function(res){$scope.records=res.filter(function(user){return user.type="monitor"})})}return{restrict:"EA",controller:ctrl,scope:{key:"@?",label:"@",ngModel:"="},template:'<select class="form-control" style="display: block;width: 100%;height: 40px;" ng-model="ngModel" ng-options="value.{{key}} as value.data.{{label}} for value in records"></select>',link:function($scope,$element,$attr){}}}function acudienteField(){function ctrl($scope,$API){$API.user().get().success(function(res){$scope.records=res.filter(function(user){return user.fullname=user.name+" "+user.last_name,"acudiente"==user.type})}),$scope.myConfig={create:!1,plugins:["remove_button"],searchField:["fullname"],valueField:$scope.key,labelField:$scope.label,placeholder:"Seleccione un acudiente"}}return{restrict:"EA",controller:ctrl,scope:{key:"@?",label:"@",ngModel:"="},template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',link:function($scope,$element,$attr){}}}function estudianteField(){function ctrl($scope,$API){$API.user().get().success(function(res){$scope.estudiantes=res.filter(function(user){return"student"==user.type})})}return{restrict:"EA",controller:ctrl,scope:{key:"@",label:"@",ngModel:"="},template:'<select class="form-control" style="display: block;width: 100%;height: 40px;" ng-model="ngModel" ng-options="value.{{key}} as value.data.{{label}} for value in estudiantes"></select>',link:function($scope,$element,$attr){}}}function paradaField(){function ctrl($scope,$API){$API.parada().get().success(function(res){$scope.paradas=res.filter(function(parada){return parada.name=parada.data.name+" - "+parada.data.address,!0})}),$scope.myConfig={create:!1,maxItems:1,searchField:["name"],valueField:$scope.key,labelField:$scope.label,placeholder:"Seleccione una parada"}}return{restrict:"EA",controller:ctrl,scope:{key:"@",label:"@",ngModel:"="},template:'<selectize config="myConfig" options="paradas" ng-model="ngModel"></selectize>',link:function($scope,$element,$attr){}}}function busField(){function ctrl($scope,$API){$API.bus().get().success(function(res){$scope.buses=res||[]})}return{restrict:"EA",controller:ctrl,scope:{key:"@",label:"@",ngModel:"="},template:'<select class="form-control" style="display: block;width: 100%;height: 40px;" ng-model="ngModel" ng-options="value.{{key}} as value.data.{{label}} for value in buses"></select>',link:function($scope,$element,$attr){}}}function appCtrl($http,$scope,$rootScope,$timeout,$storage,$account){if($scope.checkOne=!0,$rootScope.logout=function(){$account.usuario().salir()},$rootScope.showMe=function(){console.log(this)},$rootScope.year=(new Date).getFullYear(),$scope.addRemove=function(){$rootScope.items||($rootScope.items=[]);for(x in $rootScope.items)if($rootScope.items[x]._id===this.record._id)return $rootScope.items.splice(x,1),!1;$rootScope.items.push(this.record)},$rootScope.clearSelection=function(){$rootScope.items&&($rootScope.items.length=0)},console.log($storage.get("user")),$storage.get("user")){var user=$storage.get("user");user.name&&($rootScope.fullUserName=user.name+" "+user.last_name.split(" ")[0])}$scope.barProfileData=[5,6,7,2,0,4,2,4,5,7,2,4,12,11,4],$scope.barProfileOptions={type:"bar",barWidth:7,height:"30px",barColor:"#62cb31",negBarColor:"#53ac2a"},$scope.chartIncomeData=[{label:"line",data:[[1,10],[2,26],[3,16],[4,36],[5,32],[6,51]]}],$scope.chartIncomeOptions={series:{lines:{show:!0,lineWidth:0,fill:!0,fillColor:"#64cc34"}},colors:["#62cb31"],grid:{show:!1},legend:{show:!1}},$scope.dynamicTooltip="Hello, World!",$scope.htmlTooltip="I've been made <b>bold</b>!",$scope.dynamicTooltipText="Dynamic",$scope.dynamicPopover="Hello, World!",$scope.dynamicPopoverTitle="Title",$scope.totalItems=64,$scope.currentPage=4,$scope.setPage=function(pageNo){$scope.currentPage=pageNo},$scope.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],$scope.getLocation=function(val){return $http.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:val,sensor:!1}}).then(function(response){return response.data.results.map(function(item){return item.formatted_address})})},$scope.rate=7,$scope.max=10,$scope.hoveringOver=function(value){$scope.overStar=value,$scope.percent=100*(value/this.max)},$scope.groups=[{title:"Dynamic Group Header - 1",content:"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. "},{title:"Dynamic Group Header - 2",content:"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. "}],$scope.oneAtATime=!0;var data1=[[0,55],[1,48],[2,40],[3,36],[4,40],[5,60],[6,50],[7,51]],data2=[[0,56],[1,49],[2,41],[3,38],[4,46],[5,67],[6,57],[7,59]];$scope.chartUsersData=[data1,data2],$scope.chartUsersOptions={series:{splines:{show:!0,tension:.4,lineWidth:1,fill:.4}},grid:{tickColor:"#f0f0f0",borderWidth:1,borderColor:"f0f0f0",color:"#6a6c6f"},colors:["#62cb31","#efefef"]},$scope.PieChart={data:[1,5],options:{fill:["#62cb31","#edf0f5"]}},$scope.PieChart2={data:[226,360],options:{fill:["#62cb31","#edf0f5"]}},$scope.PieChart3={data:[.52,1.561],options:{fill:["#62cb31","#edf0f5"]}},$scope.PieChart4={data:[1,4],options:{fill:["#62cb31","#edf0f5"]}},$scope.PieChart5={data:[226,134],options:{fill:["#62cb31","#edf0f5"]}},$scope.PieChart6={data:[.52,1.041],options:{fill:["#62cb31","#edf0f5"]}},$scope.BarChart={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:["#dbdbdb","#62cb31"]}},$scope.LineChart={data:[5,9,7,3,5,2,5,3,9,6,5,9,4,7,3,2,9,8,7,4,5,1,2,9,5,4,7],options:{fill:"#62cb31",stroke:"#62cb31",width:64}},$scope.stanimation="bounceIn",$scope.runIt=!0,$scope.runAnimation=function(){$scope.runIt=!1,$timeout(function(){$scope.runIt=!0},100)}}function sweetAlert($timeout,$window){var swal=$window.swal;return{swal:function(arg1,arg2,arg3){$timeout(function(){"function"==typeof arg2?swal(arg1,function(isConfirm){$timeout(function(){arg2(isConfirm)})},arg3):swal(arg1,arg2,arg3)},200)},success:function(title,message){$timeout(function(){swal(title,message,"success")},200)},error:function(title,message){$timeout(function(){swal(title,message,"error")},200)},warning:function(title,message){$timeout(function(){swal(title,message,"warning")},200)},info:function(title,message){$timeout(function(){swal(title,message,"info")},200)}}}function API($q,$http,$constants,$state){return this.get=function(){var url=this.url;return this.reset(),$http.get(url)},this.post=function(data,header){var url=this.url;return this.reset(),$http.post(url,data||{},header||{headers:{"Content-Type":"application/json"}})},this.put=function(data){var url=this.url;return this.reset(),$http.put(url,data||{})},this["delete"]=function(data){var url=this.url;return this.reset(),$http["delete"](url)},this.Headers=null,this.add=function(comp){return this.url+=comp,this},this.headers=function(headers){return this.Headers=headers,this},this.reset=function(){this.url=""},this.user=function(){return this},this.ruta=function(ruta){return ruta?this.url=$constants.base+"routes/"+ruta:this.url=$constants.base+"routes/",this},this.parada=function(parada){return parada?this.url=$constants.base+"stops/"+parada:this.url=$constants.base+"stops/",this},this.bus=function(bus){return bus?this.url=$constants.base+"bus/"+bus:this.url=$constants.base+"bus/",this},this.user=function(user){return user?this.url=$constants.base+"user/"+user:this.url=$constants.base+"user/",this},this}function MAILER($q,$http,$constants){return{email:function(params){}}}function account($http,$q,$constants,$storage,$rootScope,$stateParams,$state,$timeout){return this.usuario=function(){return{ingresar:function(data){var async=$q.defer();return $http.post($constants.base+"login",data).success(function(data,status,headers,config){async.resolve(data)}).error(function(data,status,headers,config){async.reject(status)}),async.promise},salir:function(){$storage.get("token")&&($storage["delete"]("token"),$storage["delete"]("user"),window.localStorage.clear(),window.location="#/login")}}},this}function modalService($modal,sweetAlert){return{showLoading:function(params,callback){window.modal=$modal.open({
templateUrl:"views/modal/loader.html",size:"sm"})},show:function(params,onAccept,onCancel){window.modal=$modal.open({templateUrl:params.templateUrl,size:params.size||"md",scope:params.scope,controller:function($scope){$scope.ok=function(){onAccept($scope)},$scope.cancel=function(){return onCancel?void onCancel($scope):void $scope.$close()}}})},confirm:function(options,callback){var _default={confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0};window.sweet=sweetAlert.swal(angular.extend(_default,options),callback)},removeConfirm:function(options,callback){var _default={title:"EstÃ¡ Seguro?",text:"Una vez eliminado este registro, no podrÃ¡ volver a usarlo.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0};window.sweet=sweetAlert.swal(angular.extend(_default,options),callback)},incompleteForm:function(callback){var options={confirmButtonText:"Ok",showCancelButton:!1,title:"Formulario no completado",text:"Los campos con (*) son obligatorios",type:"error"};window.sweet=sweetAlert.swal(options,callback)}}}function storage(){return this.get=function(key){return window.localStorage[key]?window.localStorage[key].match(/\[\{?.*\}?\]/)?JSON.parse(window.localStorage[key]):window.localStorage[key]:void 0},this.save=function(key,value){window.localStorage[key]="object"==typeof value?JSON.stringify(value):value},this.update=function(key,value){window.localStorage[key]=window.localStorage[key].match("[{|}]")?JSON.stringify(value):value},this["delete"]=function(key){delete window.localStorage[key]},this}function alertsCtrl($scope,sweetAlert,notify){$scope.demo1=function(){sweetAlert.swal({title:"Welcome in Alerts",text:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})},$scope.demo2=function(){sweetAlert.swal({title:"Good job!",text:"You clicked the button!",type:"success"})},$scope.demo3=function(){sweetAlert.swal({title:"Are you sure?",text:"Your will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!"},function(){sweetAlert.swal("Booyah!")})},$scope.demo4=function(){sweetAlert.swal({title:"Are you sure?",text:"Your will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1},function(isConfirm){isConfirm?sweetAlert.swal("Deleted!","Your imaginary file has been deleted.","success"):sweetAlert.swal("Cancelled","Your imaginary file is safe :)","error")})},$scope.msg="Hello! This is a sample message!",$scope.demo=function(){notify({message:$scope.msg,classes:$scope.classes,templateUrl:$scope.template})},$scope.closeAll=function(){notify.closeAll()},$scope.homerTemplate="views/notification/notify.html",$scope.homerDemo1=function(){notify({message:"Info - This is a Homer info notification",classes:"alert-info",templateUrl:$scope.homerTemplate})},$scope.homerDemo2=function(){notify({message:"Success - This is a Homer success notification",classes:"alert-success",templateUrl:$scope.homerTemplate})},$scope.homerDemo3=function(){notify({message:"Warning - This is a Homer warning notification",classes:"alert-warning",templateUrl:$scope.homerTemplate})},$scope.homerDemo4=function(){notify({message:"Danger - This is a Homer danger notification",classes:"alert-danger",templateUrl:$scope.homerTemplate})}}function modalCtrl($scope,$modal){$scope.open=function(){$modal.open({templateUrl:"views/modal/modal_example.html",controller:ModalInstanceCtrl})},$scope.open1=function(){$modal.open({templateUrl:"views/modal/modal_example1.html",controller:ModalInstanceCtrl})},$scope.open3=function(size){$modal.open({templateUrl:"views/modal/modal_example3.html",size:size,controller:ModalInstanceCtrl})},$scope.open2=function(){$modal.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-info"})},$scope.open4=function(){$modal.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-warning"})},$scope.open5=function(){$modal.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-success"})},$scope.open6=function(){$modal.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-danger"})}}function ModalInstanceCtrl($scope,$modalInstance){$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}function charts_flotCtrl($scope){$scope.flotBarOptions={series:{bars:{show:!0,barWidth:.8,fill:!0,fillColor:{colors:[{opacity:.6},{opacity:.6}]},lineWidth:1}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{color:"#e4e5e7",hoverable:!0,clickable:!0,tickColor:"#D4D4D4",borderWidth:0,borderColor:"e4e5e7"},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}},$scope.flotBarOptionsDas={series:{bars:{show:!0,barWidth:.8,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]},lineWidth:1}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{show:!1},legend:{show:!1}},$scope.flotBarOptionsWid={series:{bars:{show:!0,barWidth:.8,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]},lineWidth:1}},xaxis:{tickDecimals:0},colors:["#3498db"],grid:{show:!1},legend:{show:!1}},$scope.flotChartData=[{label:"bar",data:[[1,12],[2,14],[3,18],[4,24],[5,32],[6,22]]}],$scope.flotLineAreaData=[{label:"line",data:[[1,34],[2,22],[3,19],[4,12],[5,32],[6,54],[7,23],[8,57],[9,12],[10,24],[11,44],[12,64],[13,21]]}];var data1=[[0,26],[1,24],[2,29],[3,26],[4,33],[5,26],[6,36],[7,28]];$scope.chartUsersData=[data1],$scope.chartUsersOptions={series:{splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},colors:["#62cb31","#efefef"]},$scope.pieChartData=[{label:"Data 1",data:16,color:"#84c465"},{label:"Data 2",data:6,color:"#8dd76a"},{label:"Data 3",data:22,color:"#a2c98f"},{label:"Data 4",data:32,color:"#c7eeb4"}],$scope.pieChartDataDas=[{label:"Data 1",data:16,color:"#62cb31"},{label:"Data 2",data:6,color:"#A4E585"},{label:"Data 3",data:22,color:"#368410"},{label:"Data 4",data:32,color:"#8DE563"}],$scope.pieChartDataWid=[{label:"Data 1",data:16,color:"#fad57c"},{label:"Data 2",data:6,color:"#fde5ad"},{label:"Data 3",data:22,color:"#fcc43c"},{label:"Data 4",data:32,color:"#ffb606"}],$scope.pieChartOptions={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}},$scope.lineChartData=[{label:"line",data:[[1,24],[2,15],[3,29],[4,34],[5,30],[6,40],[7,23],[8,27],[9,40]]}],$scope.lineChartOptions={series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.5},{opacity:.5}]}}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}},$scope.lineChartOptionsDas={series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}};for(var sin=[],cos=[],i=0;14>i;i+=.5)sin.push([i,Math.sin(i)]),cos.push([i,Math.cos(i)]);$scope.sinCosChartData=[{data:sin,label:"sin(x)"},{data:cos,label:"cos(x)"}],$scope.sinCosChartOptions={series:{lines:{show:!0},points:{show:!0}},grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},yaxis:{min:-1.2,max:1.2},colors:["#62cb31","#efefef"]}}function chartjsCtrl($scope){$scope.polarData=[{valor:120,color:"#62cb31",highlight:"#57b32c",label:"Homer"},{valor:140,color:"#80dd55",highlight:"#57b32c",label:"Inspinia"},{valor:100,color:"#a3e186",highlight:"#57b32c",label:"Luna"}],$scope.polarOptions={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:1,scaleBackdropPaddingX:1,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1},$scope.doughnutData=[{value:20,color:"#62cb31",highlight:"#57b32c",label:"App"},{value:120,color:"#91dc6e",highlight:"#57b32c",label:"Software"},{value:100,color:"#a3e186",highlight:"#57b32c",label:"Laptop"}],$scope.doughnutOptions={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:45,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1},$scope.lineData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"Example dataset",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[22,44,67,43,76,45,12]},{label:"Example dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.7)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(26,179,148,1)",data:[16,32,18,26,42,33,44]}]},$scope.lineOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:1,datasetFill:!0},$scope.sharpLineData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"Example dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.7)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(98,203,49,1)",data:[33,48,40,19,54,27,54]}]},$scope.sharpLineOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!1,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:1,datasetFill:!0},$scope.barOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1},$scope.barData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[65,59,80,81,56,55,40]},{label:"My Second dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.8)",highlightFill:"rgba(98,203,49,0.75)",highlightStroke:"rgba(98,203,49,1)",data:[28,48,40,19,86,27,90]}]},$scope.singleBarOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1},$scope.singleBarData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My Second dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.8)",highlightFill:"rgba(98,203,49,0.75)",highlightStroke:"rgba(98,203,49,1)",data:[10,20,30,40,30,50,60]}]},$scope.radarData={labels:["Eating","Drinking","Sleeping","Designing","Coding","Cycling","Running"],datasets:[{label:"My First dataset",fillColor:"rgba(98,203,49,0.2)",strokeColor:"rgba(98,203,49,1)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"#62cb31",data:[65,59,66,45,56,55,40]},{label:"My Second dataset",fillColor:"rgba(98,203,49,0.4)",strokeColor:"rgba(98,203,49,1)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"#62cb31",data:[28,12,40,19,63,27,87]}]},$scope.radarOptions={scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:2,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:1,datasetFill:!0},$scope.lineProjectData={labels:["January","February","March","April"],datasets:[{label:"Example dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.7)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(26,179,148,1)",data:[17,21,19,24]}]},$scope.lineProjectOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!1,pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!1,datasetStrokeWidth:1,datasetFill:!0,responsive:!0,tooltipTemplate:"<%= value %>",showTooltips:!0,onAnimationComplete:function(){this.showTooltip(this.datasets[0].points,!0)},tooltipEvents:[]}}function inlineChartsCtrl($scope){$scope.inlineData=[34,43,43,35,44,32,44,52,25],$scope.inlineOptions={type:"line",lineColor:"#54ab2c",fillColor:"#62cb31"},$scope.barSmallData=[5,6,7,2,0,-4,-2,4],$scope.barSmallOptions={type:"bar",barColor:"#62cb31",negBarColor:"#c6c6c6"},$scope.smallPieData=[1,1,2],$scope.smallPieOptions={type:"pie",sliceColors:["#62cb31","#b3b3b3","#e4f0fb"]},$scope.longLineData=[34,43,43,35,44,32,15,22,46,33,86,54,73,53,12,53,23,65,23,63,53,42,34,56,76,15,54,23,44],$scope.longLineOptions={type:"line",lineColor:"#62cb31",fillColor:"#ffffff"},$scope.tristateData=[1,1,0,1,-1,-1,1,-1,0,0,1,1],$scope.tristateOptions={type:"tristate",posBarColor:"#62cb31",negBarColor:"#bfbfbf"},$scope.discreteData=[4,6,7,7,4,3,2,1,4,4,5,6,3,4,5,8,7,6,9,3,2,4,1,5,6,4,3,7],$scope.discreteOptions={type:"discrete",lineColor:"#62cb31"},$scope.pieCustomData=[52,12,44],$scope.pieCustomOptions={type:"pie",height:"150px",sliceColors:["#1ab394","#b3b3b3","#e4f0fb"]},$scope.barCustomData=[5,6,7,2,0,4,2,4,5,7,2,4,12,14,4,2,14,12,7],$scope.barCustomOptions={type:"bar",barWidth:8,height:"150px",barColor:"#1ab394",negBarColor:"#c6c6c6"},$scope.lineCustomData=[34,43,43,35,44,32,15,22,46,33,86,54,73,53,12,53,23,65,23,63,53,42,34,56,76,15,54,23,44],$scope.lineCustomOptions={type:"line",lineWidth:1,height:"150px",lineColor:"#17997f",fillColor:"#ffffff"}}function clockCtrl($scope,$timeout){$scope.tickInterval=1e3;var tick=function(){$scope.clock=Date.now(),$timeout(tick,$scope.tickInterval)};$timeout(tick,$scope.tickInterval)}function timelineCtrl($scope){$scope.timelineItems=[{type:"The standard chunk of Lorem Ipsum",content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to ",date:1423063721,info:"It is a long established fact that"},{type:"There are many variations",content:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here",date:1423063721,info:"It is a long established fact that"},{type:"Contrary to popular belief",content:" If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text.",date:1423063721,info:"It is a long established fact that"},{type:"Lorem Ipsum",content:"All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words.",date:1423063721,info:"It is a long established fact that"},{type:"The generated Lorem Ipsum",content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to ",date:1423063721,info:"It is a long established fact that"},{type:"The standard chunk",content:"Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc.",date:1423063721,info:"It is a long established fact that"}]}function googleMapCtrl($scope,$timeout){$scope.mapOptions={zoom:14,center:new google.maps.LatLng(40.67,-73.94),styles:[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],mapTypeId:google.maps.MapTypeId.ROADMAP}}function calendarCtrl($scope){var date=new Date,d=date.getDate(),m=date.getMonth(),y=date.getFullYear();$scope.alertMessage="Report all events from UI calendar.",$scope.events=[{title:"All Day Event",start:new Date(y,m,1)},{id:999,title:"Repeating Event",start:new Date(y,m,d-3,16,0),allDay:!1},{id:999,title:"Repeating Event",start:new Date(y,m,d+4,16,0),allDay:!1},{title:"Birthday Party",start:new Date(y,m,d+1,19,0),end:new Date(y,m,d+1,22,30),allDay:!1},{title:"Homer task",start:new Date(y,m,d+5,19,0),end:new Date(y,m,d+6,22,30),allDay:!1,backgroundColor:"#62cb31",borderColor:"#62cb31"},{title:"Click for Google",start:new Date(y,m,28),end:new Date(y,m,29),url:"http://google.com/"}],$scope.alertOnEventClick=function(event,allDay,jsEvent,view){$scope.alertMessage=event.title+": Clicked "},$scope.alertOnDrop=function(event,dayDelta,minuteDelta,allDay,revertFunc,jsEvent,ui,view){$scope.alertMessage=event.title+": Droped to make dayDelta "+dayDelta},$scope.alertOnResize=function(event,dayDelta,minuteDelta,revertFunc,jsEvent,ui,view){$scope.alertMessage=event.title+": Resized to make dayDelta "+minuteDelta},$scope.uiConfig={calendar:{height:550,editable:!0,header:{left:"prev,next",center:"title",right:"month,agendaWeek,agendaDay"},eventClick:$scope.alertOnEventClick,eventDrop:$scope.alertOnDrop,eventResize:$scope.alertOnResize}},$scope.eventSources=[$scope.events]}function editorCtrl($scope){$scope.summernoteText=["<h3>Hello Jonathan! </h3>","<p>dummy text of the printing and typesetting industry. <strong>Lorem Ipsum has been the dustrys</strong> standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more","<br/><br/>All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable.","recently with.</p><p>Mark Smith</p>"].join(""),$scope.summernoteTextTwo=["<h4>It is a long established fact</h4>","<p>Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for lorem ipsum will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)","<p>Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for lorem ipsum will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)","with.</p>"].join(""),$scope.summernoteOpt={toolbar:[["headline",["style"]],["style",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["textsize",["fontsize"]],["alignment",["ul","ol","paragraph","lineheight"]]]}}function nggridCtrl($scope){$scope.exampleData=[{Name:"Jakeem",Email:"imperdiet@vulputatevelit.com",Company:"Laoreet Lectus Corporation",City:"Vaux-sur-Sure",Country:"Papua New Guinea"},{Name:"Kadeem",Email:"sit.amet.risus@scelerisquenequesed.net",Company:"Mi Felis Adipiscing Institute",City:"Fauglia",Country:"Bouvet Island"},{Name:"Paula",Email:"venenatis.lacus@milorem.net",Company:"Libero LLP",City:"Tirupati",Country:"Antigua and Barbuda"},{Name:"Bree",Email:"adipiscing.non.luctus@loremutaliquam.edu",Company:"Vitae Purus Gravida Institute",City:"Chatteris",Country:"Poland"},{Name:"Quinn",Email:"Nunc@ac.com",Company:"Dui Lectus Rutrum Consulting",City:"Wolverhampton",Country:"Venezuela"},{Name:"Magee",Email:"pretium.aliquet.metus@venenatislacus.co.uk",Company:"Dui Associates",City:"Stokrooie",Country:"Japan"},{Name:"Rowan",Email:"mus@rutrum.net",Company:"Diam Pellentesque Habitant Institute",City:"Ashburton",Country:"Taiwan"},{Name:"Nina",Email:"lobortis.augue@feugiatnec.org",Company:"Auctor Velit Eget Consulting",City:"Stevenage",Country:"Denmark"},{Name:"Chava",Email:"nec@ipsumSuspendissesagittis.com",Company:"Egestas Company",City:"Aulnay-sous-Bois",Country:"Togo"},{Name:"Uma",Email:"tincidunt.nunc@vestibulumneque.net",Company:"Sem Semper Corp.",City:"Dalkeith",Country:"Nigeria"},{Name:"Amal",Email:"laoreet.posuere@eu.net",Company:"Non Massa PC",City:"Stafford",Country:"South Sudan"},{Name:"Dana",Email:"Nulla.dignissim@mattisornarelectus.co.uk",Company:"Laoreet PC",City:"Gentinnes",Country:"Korea, South"},{Name:"Iris",Email:"nostra.per.inceptos@magnamalesuada.co.uk",Company:"Diam Vel LLC",City:"Oudekapelle",Country:"Dominican Republic"},{Name:"Joshua",Email:"Duis@enimgravidasit.com",Company:"Magna Foundation",City:"San Francisco",Country:"Guinea-Bissau"},{Name:"Rosalyn",Email:"egestas.ligula.Nullam@auctorullamcorpernisl.ca",Company:"Sodales Mauris LLC",City:"SeydiÅehir",Country:"Sudan"},{Name:"Hilary",Email:"et.pede.Nunc@accumsanneque.co.uk",Company:"Et Rutrum Corp.",City:"Broechem",Country:"Bulgaria"},{Name:"Amena",Email:"nisl.Maecenas.malesuada@vitaeorci.edu",Company:"Quis LLC",City:"Joliet",Country:"Saint Lucia"},{Name:"Rashad",Email:"Pellentesque.tincidunt@euneque.org",Company:"Suspendisse Tristique Neque Industries",City:"Amlwch",Country:"Timor-Leste"},{Name:"Sharon",Email:"ornare.sagittis@vitaeeratvel.ca",Company:"Tellus Foundation",City:"Woodstock",Country:"Chile"}],$scope.gridOptions={data:"exampleData"},$scope.gridOptionsTwo={data:"exampleData",showGroupPanel:!0,jqueryUIDraggable:!0}}function nestableCtrl($scope){$scope.remove=function(scope){scope.remove()},$scope.moveLastToTheBeginning=function(){var a=$scope.data.pop();$scope.data.splice(0,0,a)},$scope.collapseAll=function(){$scope.$broadcast("collapseAll")},$scope.expandAll=function(){$scope.$broadcast("expandAll")},$scope.data=[{nombre_p:"Manga",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Centro",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Getsemani",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Bocagrande",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}function tourCtrl($scope){}function datatablesCtrl($scope,DTOptionsBuilder,DTColumnBuilder){$scope.dtOptions=DTOptionsBuilder.fromSource("api/datatables.json"),$scope.dtColumns=[DTColumnBuilder.newColumn("Name").withTitle("Name"),DTColumnBuilder.newColumn("Position").withTitle("Position"),DTColumnBuilder.newColumn("Office").withTitle("Office"),DTColumnBuilder.newColumn("Age").withTitle("Age"),DTColumnBuilder.newColumn("Start_date").withTitle("Start_date"),DTColumnBuilder.newColumn("Salary").withTitle("Salary")]}function wizardOneCtrl($scope,notify,sweetAlert){$scope.user={username:"Mark Smith",email:"mark@company.com",password:"secret_password",approve:!1},$scope.step=1,$scope.wizard={show:function(number){$scope.step=number},next:function(){$scope.step++},prev:function(){$scope.step--}},$scope.submit=function(){sweetAlert.swal({title:"Thank you!",text:"You approved our example form!",type:"success"}),$scope.step=1}}function formsCtrl($scope){$scope.user={name:"awesome user",desc:"Awesome user \ndescription!",remember:!0},$scope.person={},$scope.people=[{name:"Adam",email:"adam@email.com",age:10},{name:"Amalie",email:"amalie@email.com",age:12},{name:"Wladimir",email:"wladimir@email.com",age:30},{name:"Samantha",email:"samantha@email.com",age:31},{name:"EstefanÃ­a",email:"estefanÃ­a@email.com",age:16},{name:"Natasha",email:"natasha@email.com",age:54},{name:"Nicole",email:"nicole@email.com",age:43},{name:"Adrian",email:"adrian@email.com",age:21}],$scope.availableColors=["Red","Green","Blue","Yellow","Magenta","Maroon","Umbra","Turquoise"],$scope.multipleDemo={},$scope.multipleDemo.colors=["Blue","Red"],$scope.availableTags=["Branding","Website","Design","Ilustration","New","Important","External"],$scope.multipleTags={},$scope.multipleTags.tags=["Branding","Website","Design","Ilustration","New"],$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0}}function SelectLocalCtrl($scope,$filter){$scope.user={status:2},$scope.statuses=[{value:1,text:"status1"},{value:2,text:"status2"},{value:3,text:"status3"},{value:4,text:"status4"}],$scope.showStatus=function(){var selected=$filter("filter")($scope.statuses,{value:$scope.user.status});return $scope.user.status&&selected.length?selected[0].text:"Not set"}}function RadiolistCtrl($scope,$filter){$scope.user={status:2},$scope.statuses=[{value:1,text:"status1"},{value:2,text:"status2"}],$scope.showStatus=function(){var selected=$filter("filter")($scope.statuses,{value:$scope.user.status});return $scope.user.status&&selected.length?selected[0].text:"Not set"}}function Html5InputsCtrl($scope){$scope.user={email:"email@example.com",tel:"123-45-67",number:29,range:10,url:"http://example.com",search:"blabla",color:"#6a4415",date:null,time:"12:30",datetime:null,month:null,week:null}}function DatepickerDemoCtrl($scope){$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.clear=function(){$scope.dt=null},$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0]}function spinCtrl($scope){$scope.inputteresxcs=55,$scope.spinOption1={min:0,max:100,step:.1,decimals:2,boostat:5,maxboostedstep:10},$scope.spinOption2={verticalbuttons:!0},$scope.spinOption3={postfix:"%"},$scope.spinOption4={postfix:"a button",postfix_extraclass:"btn btn-default"}}function validationCtrl($scope){$scope.signupForm=function(){$scope.signup_form.$valid||($scope.signup_form.submitted=!0)}}function chartistCtrl($scope){$scope.lineData={labels:["Monday","Tuesday","Wednesday","Thursday","Friday"],series:[[12,9,7,8,5],[2,1,3.5,7,3],[1,3,4,5,6]]},$scope.lineOptions={fullWidth:!0,chartPadding:{right:40}},$scope.pieData={series:[10,5,5]},$scope.guageData={series:[25,25,25,25]},$scope.guageOptions={donut:!0,donutWidth:60,startAngle:270,total:200,showLabel:!1},$scope.hbarData={labels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],series:[[2,3,4,5,6,7,8],[3,4,5,6,7,8,9]]},$scope.hbarOptions={seriesBarDistance:10,reverseData:!0,horizontalBars:!0,axisY:{offset:70}},$scope.sbarData={labels:["Q1","Q2","Q3","Q4"],series:[[8e5,12e5,14e5,12e5],[2e5,4e5,5e5,3e5],[3e5,3e5,4e5,6e5]]},$scope.sbarOptions={stackBars:!0,axisY:{labelInterpolationFnc:function(value){return value/1e3+"k"}}},$scope.areaData={labels:[1,2,3,4,5,6,7,8],series:[[5,9,7,8,5,3,5,4]]},$scope.areaOptions={low:0,showArea:!0}}function codeEditorCtrl($scope){$scope.editorOptions={lineNumbers:!0,matchBrackets:!0,styleActiveLine:!0}}function touchSpin(){return{restrict:"A",scope:{spinOptions:"="},link:function(scope,element,attrs){scope.$watch(scope.spinOptions,function(){render()});var render=function(){$(element).TouchSpin(scope.spinOptions)}}}}function loginCtrl($scope,$rootScope,$API,$storage,sweetAlert,$state,$modalService,$account){$scope.load=function(){$storage.get("token")&&$state.go("dashboard")},$scope.logIn=function(){$account.usuario().ingresar($scope.form.data).then(function(res){if(res.token){$storage.save("token",res.token),$storage.save("user",res.user);var user=res.user;$rootScope.fullUserName=user.name+" "+user.last_name.split(" ")[0],$state.go("dashboard")}},function(status){401==status&&sweetAlert.swal({title:"Credenciales no validas",text:"Usuario o clave no valido",type:"error"})})}}function changePasswordCtrl($scope,$API,sweetAlert){$scope.changePassword=function(){console.log("formData",$scope.form.data)}}function headerCtrl($scope,$account,$state){}function usuarioCtrl($scope){$scope.usuarios=[{nombre:"Nicolas",apellido:"Pelaez",nombre_usuario:"nico123"},{nombre:"Carlos",apellido:"Aristizabal",nombre_usuario:"Aristi27"},{nombre:"Johana",apellido:"Ortega",nombre_usuario:"Joha_ortega"}],$scope.agregar=function(){$scope.usuarios.push({nombre:$scope.nombre,apellido:$scope.apellido,nombre_usuario:$scope.nombre_usuario}),$("#modal_user").modal("hide"),$scope.nombre="",$scope.apellido="",$scope.nombre_usuario="",console.log($scope.usuarios)},$scope.eliminar=function(text){for(i=0;i<$scope.usuarios.length;i++)$scope.usuarios[i].nombre_usuario===text&&$scope.usuarios.splice(i,1)},$scope.cambiausuario=function(usuario){$scope.usuario=usuario,$scope.usuarios=null}}function studentCtrl($scope,$API,$window,$modalService,sweetAlert,$rootScope,$timeout,$q,DTOptionsBuilder){$scope.records=[],$scope.Records=!1;$scope.load=function(){$scope.grados=[],$scope.grados.push({"Filtrar por grado":{label:"Filtrar por grado",value:null}});var grades={};$API.user().get().success(function(res){console.log(res),$scope.Records=!0,$scope.records=res.filter(function(user){return"student"==user.type?(grades[user.metadata.grado]||(grades[user.metadata.grado]=user.metadata.grado,$scope.grados.push({label:"Grado "+user.metadata.grado,value:user.metadata.grado})),!0):void 0}),console.log($scope.grados)})},$scope.asociarRuta=function(){$modalService.show({templateUrl:"views/modal/asociar-ruta.html",size:"md",scope:$scope},function($scope){if($scope.formAsociarRuta.$invalid)return void $modalService.incompleteForm();var _request=[];$modalService.showLoading(),angular.forEach($rootScope.items,function(item,key){_request.push($API.user(item._id).put({_route:$scope.form.data._route}))}),$q.all(_request).then(function(res){res&&$timeout(function(){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$window.modal.close(),$scope.$close(),$rootScope.clearSelection()},3e3)},function(){})})},$scope.asociarAcudiente=function(){$modalService.show({templateUrl:"views/modal/asociar-acudiente.html",size:"md",scope:$scope},function($scope){if($scope.formAsociarAcudiente.$invalid)return void $modalService.incompleteForm();$modalService.showLoading();var _request=[];angular.forEach($rootScope.items,function(item,key){_request.push($API.user(item._id).put({
_responsible:$scope.form.data._responsible}))}),$q.all(_request).then(function(res){res&&$timeout(function(){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$window.modal.close(),$rootScope.clearSelection(),$scope.$close()},3e3)},function(){})})},$scope.asociarParada=function(){$modalService.show({templateUrl:"views/modal/asociar-parada.html",size:"md",scope:$scope},function($scope){if($scope.formAsociarParada.$invalid)return void $modalService.incompleteForm();$modalService.showLoading();var _request=[];angular.forEach($rootScope.items,function(item,key){_request.push($API.user(item._id).put({_stop:$scope.form.data._stop}))}),$q.all(_request).then(function(res){res&&$timeout(function(){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$window.modal.close(),$scope.$close(),$rootScope.clearSelection()},3e3)},function(){})})},$scope.crearPlanViaje=function(){$modalService.show({templateUrl:"views/modal/crear-plan-de-viaje.html",size:"lg",scope:$scope},function($scope){if($scope.formPlanViaje.$invalid)return void $modalService.incompleteForm();var _request=[];$modalService.showLoading(),angular.forEach($rootScope.items,function(item,key){var data=new Object;data.metadata=item.metadata||{},data.metadata.journey_plan=$scope.plan,_request.push($API.user(item._id).put(data))}),$q.all(_request).then(function(res){res&&$timeout(function(){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$window.modal.close(),$scope.$close(),$rootScope.clearSelection()},3e3)},function(){})})},$scope.editarPlanViaje=function(plan){$scope.formEdit=plan,$modalService.show({templateUrl:"views/modal/editar-plan-de-viaje.html",size:"lg",scope:$scope},function($scope){return $scope.formPlanViaje.$invalid?void $modalService.incompleteForm():void $scope.$close()})},$scope.agregar=function(){$modalService.show({templateUrl:"views/modal/crear-estudiante.html",size:"md",scope:$scope},function($scope){return $scope.formEstudiante.$invalid?void $modalService.incompleteForm():void $API.user().post(angular.extend($scope.form.data,{type:"student",password:"123456",username:$scope.form.data.metadata.codigo+$scope.form.data.metadata.grado+"@dschool.com"})).success(function(res){res&&($scope.load(),$scope.$close(),delete $scope.form.data)})})},$scope.actualizar=function(estudiante){$scope.formEdit=new Object,$scope.formEdit.data=angular.copy(estudiante),$scope.formEdit.data._route=$scope.formEdit.data._route?$scope.formEdit.data._route.map(function(item){return item._id}):null,$scope.formEdit.data._responsible=$scope.formEdit.data._responsible?$scope.formEdit.data._responsible.map(function(item){return item._id}):null,$scope.formEdit.data._stop=$scope.formEdit.data._stop?$scope.formEdit.data._stop:null,$modalService.show({templateUrl:"views/modal/editar-estudiante.html",scope:$scope},function($scope){return $scope.formEstudiante.$invalid?void $modalService.incompleteForm():void $API.user(estudiante._id).put($scope.formEdit.data).success(function(res){res&&(sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),delete $scope.formEdit,$scope.$close())})})},$scope.eliminar=function(estudiante){$modalService.removeConfirm({},function(isConfirm){isConfirm&&$API.user(estudiante._id)["delete"]().success(function(res){$scope.records.splice($scope.records.indexOf(estudiante),1),sweetAlert.swal("Eliminado!","Registro Eliminado Correctamente.","success")})})}}function rutaCtrl($scope,$API,sweetAlert,$modalService){$scope.records=[],$scope.Records=!1,$scope.load=function(){$API.ruta().get().success(function(res){$scope.Records=!0,$scope.records=res})},$scope.agregar=function(){$modalService.show({templateUrl:"views/modal/crear-ruta.html",size:"md",scope:$scope},function($scope){return $scope.formRuta.$invalid?void $modalService.incompleteForm():void $API.ruta().post($scope.form).success(function(res){res&&($scope.load(),$scope.$close(),delete $scope.form.data)})})},$scope.actualizar=function(ruta){$scope.form=new Object,$scope.form.data=angular.copy(ruta.data),$modalService.show({templateUrl:"views/modal/editar-ruta.html",scope:$scope},function($scope){return $scope.formRuta.$invalid?void $modalService.incompleteForm():void $API.ruta(ruta._id).put($scope.form).success(function(res){res&&(sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),ruta.data=$scope.form.data,delete $scope.form,$scope.$close())})})},$scope.eliminar=function(ruta){$modalService.removeConfirm({},function(isConfirm){isConfirm&&$API.ruta(ruta._id)["delete"]().success(function(res){res&&($scope.records.splice($scope.records.indexOf(ruta),1),sweetAlert.swal("Eliminado!","Registro Eliminado Correctamente.","success"))})})},$scope.cambiausuario=function(usuario){$scope.usuario=usuario,$scope.usuarios=null}}function paradaCtrl($scope,$API,sweetAlert,$window,$modalService,$rootScope,$q,$timeout){$scope.records=[],$scope.Records=!1,$scope.mytime=new Date,$scope.hstep=1,$scope.mstep=15,$scope.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},$scope.ismeridian=!0,$scope.toggleMode=function(){$scope.ismeridian=!$scope.ismeridian},$scope.update=function(){var d=new Date;d.setHours(14),d.setMinutes(0),$scope.mytime=d},$scope.changed=function(){$log.log("Time changed to: "+$scope.mytime)},$scope.clear=function(){$scope.mytime=null},$scope.load=function(){$API.parada().get().success(function(res){$scope.records=res||[],$scope.Records=!0})},$scope.agregar=function(){$modalService.show({templateUrl:"views/modal/crear-parada.html",size:"md",scope:$scope},function($scope){return $scope.formParada.$invalid?void $modalService.incompleteForm():void $API.parada().post($scope.form).success(function(res){res&&($scope.load(),$scope.$close(),delete $scope.form)})})},$scope.asociarRuta=function(){$modalService.show({templateUrl:"views/modal/asociar-ruta.html",size:"md",scope:$scope},function($scope){if($scope.formAsociarRuta.$invalid)return void $modalService.confirm({confirmButtonText:"OK",showCancelButton:!1,title:"Formulario no completado",text:"Los campos con (*) son obligatorios",type:"error"});$modalService.showLoading();var _request=[];angular.forEach($rootScope.items,function(item,key){_request.push($API.parada(item._id).put($scope.form.data))}),$q.all(_request).then(function(res){res&&$timeout(function(){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$window.modal.close(),$scope.$close(),$rootScope.clearSelection()},3e3)},function(){})})},$scope.eliminar=function(parada){$modalService.removeConfirm({},function(isConfirm){isConfirm&&$API.parada(parada._id)["delete"]().success(function(res){res&&($scope.records.splice($scope.records.indexOf(parada),1),sweetAlert.swal("Eliminado!","Registro Eliminado Correctamente.","success"))})})},$scope.actualizar=function(parada){$scope.formEdit=new Object,$scope.formEdit=angular.copy(parada),$scope.formEdit._route=$scope.formEdit._route?$scope.formEdit._route._id:null,$modalService.show({templateUrl:"views/modal/editar-parada.html",scope:$scope},function($scope){return $scope.formParada.$invalid?void $modalService.incompleteForm():void $API.parada(parada._id).put($scope.formEdit).success(function(res){res&&(sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),delete $scope.formEdit.data,$scope.$close())})})}}function busCtrl($scope,$API,sweetAlert,$window,$modalService,$rootScope,$timeout,$q){$scope.Records=!1,$scope.records=[],$scope.load=function(){$API.bus().get().success(function(res){$scope.Records=!0,$scope.records=res||[]})},$scope.agregar=function(){$modalService.show({templateUrl:"views/modal/crear-bus.html",size:"md",scope:$scope},function($scope){return $scope.formBus.$invalid?void $modalService.incompleteForm():void $API.bus().post($scope.form).success(function(res){res&&($scope.load(),$scope.$close(),delete $scope.form.data)})})},$scope.asociarRuta=function(){$modalService.show({templateUrl:"views/modal/asociar-ruta.html",size:"md",scope:$scope},function($scope){if($scope.formAsociarRuta.$invalid)return void $modalService.confirm({confirmButtonText:"OK",showCancelButton:!1,title:"Formulario no completado",text:"Los campos con (*) son obligatorios",type:"error"});$modalService.showLoading();var _request=[];angular.forEach($rootScope.items,function(item,key){_request.push($API.bus(item._id).put($scope.form.data))}),$q.all(_request).then(function(res){res&&$timeout(function(){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$window.modal.close(),$scope.load(),$scope.$close(),$rootScope.clearSelection()},3e3)},function(){})})},$scope.eliminar=function(bus){$modalService.removeConfirm({},function(isConfirm){isConfirm&&$API.bus(bus._id)["delete"]().success(function(res){res&&($scope.records.splice($scope.records.indexOf(bus),1),sweetAlert.swal("Eliminado!","Registro Eliminado Correctamente.","success"))})})},$scope.actualizar=function(bus){$scope.formEdit=new Object,$scope.formEdit=angular.copy(bus),$modalService.show({templateUrl:"views/modal/editar-bus.html",scope:$scope},function($scope){return $scope.formBus.$invalid?void $modalService.incompleteForm():($scope.formEdit._route=$scope.formEdit._route._id,void $API.bus(bus._id).put($scope.formEdit).success(function(res){$scope.load(),sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),delete $scope.formEdit.data,$scope.$close()}))})},$scope.cambiausuario=function(usuario){$scope.usuario=usuario,$scope.usuarios=null}}function asistenciaCtrl($scope){$scope.rutas=[{nombre:"Ruta 1",origen:"Plazuela",destino:"centro",trayectos:[{nombre:"Bocagrande - Manga",origen:"MaÃ±ana",paradas:[{nombre_p:"Bocagrande",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Centro",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Puente Roman",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Manga",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}]},{nombre:"Ruta 2",origen:"Mamonal",destino:"bocagrande",trayectos:[{nombre:"Bocagrande - Crespo",origen:"MaÃ±ana",paradas:[{nombre_p:"Centro",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Marbella",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Crespo",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}]},{nombre:"Ruta 3",origen:"Crespo",destino:"bocagrande",trayectos:[{}]}],$scope.trayectos=[{nombre:"Bocagrande - Manga",origen:"MaÃ±ana",paradas:[{nombre:"Centro",numero:1,hora:"7:15 am"},{nombre:"Getsemani",numero:2,hora:"7:30 am"},{nombre:"Puente roman",numero:2,hora:"7:30 am"},{nombre:"Manga",numero:3,hora:"7:45 am"}]},{nombre:"Bocagrande - Crespo",origen:"MaÃ±ana",paradas:[{nombre:"Centro",numero:1,hora:"7:15 am"},{nombre:"Marbella",numero:2,hora:"7:30 am"},{nombre:"Crespo",numero:3,hora:"7:45 am"}]},{nombre:"Manga - Bocagrande",origen:"Tarde",paradas:[{nombre:"Manga",numero:1,hora:"7:15 am"},{nombre:"Centro",numero:2,hora:"7:30 am"},{nombre:"Getsemani",numero:3,hora:"7:30 am"},{nombre:"Bocagrande",numero:4,hora:"7:45 am"}]}],$scope.usuarios=[{nombre:"James",apellido:"Meza",nombre_usuario:"james007",codigo:"001",grado:"septimo",parada:"Bocagrande"},{nombre:"Carolina",apellido:"Paez",nombre_usuario:"Caro",codigo:"015",grado:"noveno",parada:"Centro"},{nombre:"Luisa",apellido:"Zarate",nombre_usuario:"luZ",codigo:"026",grado:"octavo",parada:"Getsemani"},{nombre:"Gabriel",apellido:"Navarro",nombre_usuario:"Gabo",codigo:"004",grado:"cuarto",parada:"Manga"},{nombre:"Samir",apellido:"Galvis",nombre_usuario:"Samix",codigo:"017",grado:"Decimo",parada:"Pie de la popa"},{nombre:"Nicol",apellido:"Kelsu",nombre_usuario:"nicolk",codigo:"022",grado:"octavo",parada:"Manga"},{nombre:"James",apellido:"Meza",nombre_usuario:"james007",codigo:"001",grado:"septimo",parada:"Getsemani"},{nombre:"Carolina",apellido:"Paez",nombre_usuario:"Caro",codigo:"015",grado:"noveno",parada:"Pie de la popa"},{nombre:"Luisa",apellido:"Zarate",nombre_usuario:"luZ",codigo:"026",grado:"octavo",parada:"Bocagrande"}],$scope.paradas=[],$scope.asistentes=$scope.usuarios,$scope.trayecto=[],$scope.buscarRuta=function(nombre){for(i=0;i<$scope.rutas.length;i++)if($scope.rutas[i].nombre===nombre)return i},$scope.seleccionarRuta=function(){$scope.trayecto=[];var i=$scope.buscarRuta($scope.ruta);$scope.trayecto=$scope.rutas[i].trayectos},$scope.buscarTrayecto=function(pos_ruta,nombre){var ruta=$scope.rutas[pos_ruta];for(i=0;i<ruta.trayectos.length;i++)if(ruta.trayectos[i].nombre===nombre)return ruta.trayectos[i]},$scope.seleccionarTrayecto=function(){console.log("Entro a seleccionar trayecto");var pos_ruta=$scope.buscarRuta($scope.ruta),trayecto=$scope.buscarTrayecto(pos_ruta,$scope.trayecto_asociado);$scope.paradas=trayecto.paradas,console.log($scope.paradas)},$scope.paradaAsistencia=function(text){for($scope.asistentes=[],console.log(text),i=0;i<$scope.usuarios.length;i++)$scope.usuarios[i].parada===text&&$scope.asistentes.push($scope.usuarios[i])},$scope.getAll=function(){$scope.asistentes=$scope.usuarios},$scope.buscar_ruta=function(text){for(i=0;i<$scope.rutas.length;i++)if($scope.rutas[i].nombre===text)return $scope.rutas[i].estudiantes},$scope.agregar=function(){$scope.usuarios.push({nombre:$scope.nombre,apellido:$scope.apellido,nombre_usuario:$scope.nombre_usuario,codigo:$scope.codigo,grado:$scope.grado}),$("#modal_user").modal("hide"),$scope.nombre="",$scope.apellido="",$scope.nombre_usuario="",$scope.codigo="",$scope.grado=""},$scope.eliminar=function(text){for(i=0;i<$scope.usuarios.length;i++)$scope.usuarios[i].nombre_usuario===text&&$scope.usuarios.splice(i,1)}}function rutaEstudianteCtrl($scope){$scope.rutas=[{nombre:"Ruta 1",origen:"Plazuela",destino:"centro",trayecto:[{nombre:"Bocagrande - Manga",origen:"MaÃ±ana",paradas:[{nombre_p:"Bocagrande",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Centro",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Manga",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}]},{nombre:"Ruta 2",origen:"Mamonal",destino:"bocagrande",trayecto:[{nombre:"Bocagrande - Crespo",origen:"MaÃ±ana",paradas:[{nombre_p:"Centro",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Marbella",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Crespo",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}]},{nombre:"Ruta 3",origen:"Crespo",destino:"bocagrande",trayecto:[{}]}],$scope.usuarios=[{nombre:"James",apellido:"Meza",nombre_usuario:"james007",codigo:"001",grado:"septimo",parada:"Bocagrande",direccion:"Manga 2da avenida #21-3",edificio:"Palmetto",barrio:"Manga",grupo:""},{nombre:"Carolina",apellido:"Paez",nombre_usuario:"Caro",codigo:"015",grado:"noveno",parada:"Centro",direccion:"Centro, San Diego, Calle del Curato #38-72",edificio:"Colpatria",barrio:"Centro",grupo:""},{nombre:"Luisa",apellido:"Zarate",nombre_usuario:"luZ",codigo:"026",grado:"octavo",parada:"Getsemani",direccion:"Calle 1 A No. 3 - 159. Av Almirante BriÃ³n, El Getsemani ",edificio:"Nuevo conquistador",barrio:"Getsemani",grupo:""},{nombre:"Gabriel",apellido:"Navarro",nombre_usuario:"Gabo",codigo:"004",grado:"cuarto",parada:"Manga, Dian",direccion:"Bella vista",edificio:"120, Tv. 17 #26",barrio:"Manga",grupo:""},{nombre:"Samir",apellido:"Galvis",nombre_usuario:"Samix",codigo:"017",grado:"Decimo",parada:"Pie de la popa",direccion:"156, Carrera 20 24ABIS #24",edificio:"Luna del mar",barrio:"Pie de la popa",grupo:""},{nombre:"Nicol",apellido:"Kelsu",nombre_usuario:"nicolk",codigo:"022",grado:"octavo",parada:"Manga, Dian",direccion:"61, Cl. 10 #",edificio:"Porto fino",barrio:"Manga",grupo:""},{nombre:"James",apellido:"Meza",nombre_usuario:"james007",codigo:"001",grado:"septimo",parada:"Getsemani",direccion:"77, Cl. 5 #7",edificio:"Ventura",barrio:"Getsemani",grupo:""},{nombre:"Carolina",apellido:"Paez",nombre_usuario:"Caro",codigo:"015",grado:"noveno",parada:"Pie de la popa",direccion:"24, Cl. 6 #5 A",edificio:"Grand bay club",barrio:"Pie de la popa",grupo:""},{nombre:"Luisa",apellido:"Zarate",nombre_usuario:"luZ",codigo:"026",grado:"octavo",parada:"Bocagrande",direccion:" 59, San MartÃ­n #10",edificio:"Sky",barrio:"Bocagrande",grupo:""}],$scope.agregar=function(){$scope.usuarios.push({nombre:$scope.nombre,apellido:$scope.apellido,nombre_usuario:$scope.nombre_usuario,codigo:$scope.codigo,grado:$scope.grado}),$("#modal_user").modal("hide"),$scope.nombre="",$scope.apellido="",$scope.nombre_usuario="",$scope.codigo="",$scope.grado=""},$scope.eliminar=function(text){for(i=0;i<$scope.usuarios.length;i++)$scope.usuarios[i].nombre_usuario===text&&$scope.usuarios.splice(i,1)},$scope.selectRuta=function(dia,ruta){"lunes_am"===dia&&($scope.lunes_am=$scope.trayecto(ruta)),"martes_am"===dia&&($scope.martes_am=$scope.trayecto(ruta)),"miercoles_am"===dia&&($scope.miercoles_am=$scope.trayecto(ruta)),"jueves_am"===dia&&($scope.jueves_am=$scope.trayecto(ruta)),"viernes_am"===dia&&($scope.viernes_am=$scope.trayecto(ruta)),"sabado_am"===dia&&($scope.sabado_am=$scope.trayecto(ruta)),"domingo_am"===dia&&($scope.domingo_am=$scope.trayecto(ruta)),"lunes_pm"===dia&&($scope.lunes_pm=$scope.trayecto(ruta)),"martes_pm"===dia&&($scope.martes_pm=$scope.trayecto(ruta)),"miercoles_pm"===dia&&($scope.miercoles_pm=$scope.trayecto(ruta)),"jueves_pm"===dia&&($scope.jueves_pm=$scope.trayecto(ruta)),"viernes_pm"===dia&&($scope.viernes_pm=$scope.trayecto(ruta)),"sabado_pm"===dia&&($scope.sabado_pm=$scope.trayecto(ruta)),"domingo_pm"===dia&&($scope.domingo_pm=$scope.trayecto(ruta))},$scope.selectTrayecto=function(dia,nombre_trayecto){"lunes_am"===dia&&($scope.p_lunes_am=$scope.parada($scope.lunes_am,nombre_trayecto)),"martes_am"===dia&&($scope.p_martes_am=$scope.parada($scope.martes_am,nombre_trayecto)),"miercoles_am"===dia&&($scope.p_miercoles_am=$scope.parada($scope.miercoles_am,nombre_trayecto)),"jueves_am"===dia&&($scope.p_jueves_am=$scope.parada($scope.jueves_am,nombre_trayecto)),"viernes_am"===dia&&($scope.p_viernes_am=$scope.parada($scope.viernes_am,nombre_trayecto)),"sabado_am"===dia&&($scope.p_sabado_am=$scope.parada($scope.sabado_am,nombre_trayecto)),"domingo_am"===dia&&($scope.p_domingo_am=$scope.parada($scope.domingo_am,nombre_trayecto)),"lunes_pm"===dia&&($scope.p_lunes_pm=$scope.parada($scope.lunes_pm,nombre_trayecto)),"martes_pm"===dia&&($scope.p_martes_pm=$scope.parada($scope.martes_pm,nombre_trayecto)),"miercoles_pm"===dia&&($scope.p_miercoles_pm=$scope.parada($scope.miercoles_pm,nombre_trayecto)),"jueves_pm"===dia&&($scope.p_jueves_pm=$scope.parada($scope.jueves_pm,nombre_trayecto)),"viernes_pm"===dia&&($scope.p_viernes_pm=$scope.parada($scope.viernes_pm,nombre_trayecto)),"sabado_pm"===dia&&($scope.p_sabado_pm=$scope.parada($scope.sabado_pm,nombre_trayecto)),"domingo_pm"===dia&&($scope.p_domingo_pm=$scope.parada($scope.domingo_pm,nombre_trayecto))},$scope.trayecto=function(temp){return pos_ruta=$scope.buscarRuta(temp),$scope.rutas[pos_ruta].trayecto},$scope.parada=function(trayectos,nombre){for(i=0;i<trayectos.length;i++)if(trayectos[i].nombre===nombre)return trayectos[i].paradas},$scope.buscarRuta=function(ruta){for(i=0;i<$scope.rutas.length;i++)if($scope.rutas[i].nombre===ruta)return i}}function trayectoCtrl($scope){$scope.remove=function(scope){scope.remove()},$scope.moveLastToTheBeginning=function(){var a=$scope.data.pop();$scope.data.splice(0,0,a)},$scope.collapseAll=function(){$scope.$broadcast("collapseAll")},$scope.expandAll=function(){$scope.$broadcast("expandAll")},$scope.paradas=[],$scope.rutas=[{nombre:"Ruta 1",origen:"Plazuela",destino:"centro",trayecto:[{nombre:"Bocagrande - Manga",origen:"MaÃ±ana",paradas:[{nombre_p:"Bocagrande",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Centro",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Manga",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}]},{nombre:"Ruta 2",origen:"Mamonal",destino:"bocagrande",trayecto:[{nombre:"Bocagrande - Crespo",origen:"MaÃ±ana",paradas:[{nombre_p:"Centro",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Marbella",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Crespo",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}]},{nombre:"Ruta 3",origen:"Crespo",destino:"bocagrande",trayecto:[{}]}],$scope.trayecto=[{nombre:"Bocagrande - Manga",origen:"MaÃ±ana",paradas:[{nombre_p:"Bocagrande",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Centro",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Manga",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]},{nombre:"Bocagrande - Crespo",origen:"MaÃ±ana",paradas:[{nombre_p:"Centro",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Marbella",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Crespo",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]},{nombre:"Manga - Bocagrande",origen:"Tarde",paradas:[{nombre_p:"Manga",numero_p:"1",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Centro",numero_p:"2",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Getsemani",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""},{nombre_p:"Bocagrande",numero_p:"3",latitud:"",longitud:"",direccion_p:"",descripcion_p:""}]}],$scope.agregarParada=function(trayecto){$scope.data.push({nombre_p:$scope.nombre_p,numero_p:$scope.numero_p,latitud:$scope.latitud,longitud:$scope.longitud,direccion_p:$scope.direccion_p,descripcion_p:$scope.descripcion_p}),$("#agregar_parada").modal("hide"),$scope.nombre_p="",$scope.numero_p="",$scope.latitud="",$scope.longitud="",$scope.direccion_="",$scope.descripcion_p=""},$scope.buscarTrayecto=function(trayecto){for(i=0;i<$scope.trayectotrayecto.length;i++)if($scope.trayectotrayecto[i].nombre===trayecto)return i},$scope.eliminarParada=function(parada,nombre_trayecto){var i=$scope.buscarTrayecto(nombre_trayecto);for(y=0;y<$scope.trayectotrayecto[i].paradas.length;y++)$scope.trayectotrayecto[i].paradas[y]===parada&&$scope.trayectotrayecto[i].paradas.splice(y,1)},$scope.agregar=function(){$scope.trayecto.push({nombre:$scope.nombre,origen:$scope.origen,destino:$scope.destino}),$("#modal_user").modal("hide"),$scope.nombre="",$scope.origen="",$scope.destino=""},$scope.verParada=function(text){for(i=0;i<$scope.trayecto.length;i++)$scope.trayecto[i].nombre===text&&($scope.data=$scope.trayecto[i].paradas)},$scope.eliminar=function(text){for(i=0;i<$scope.trayecto.length;i++)$scope.trayecto[i].nombre===text&&$scope.trayecto.splice(i,1)},$scope.cambiausuario=function(usuario){$scope.usuario=usuario,$scope.usuarios=null}}function monitorCtrl($scope,$API,$modalService,$window,sweetAlert,$rootScope,$timeout,$q){$scope.records=[],$scope.Records=!1,$scope.load=function(){$API.user().get().success(function(res){$scope.Records=!0,$scope.records=res.filter(function(user){return"monitor"==user.type&&console.log(user),"monitor"==user.type})||[]})},$scope.agregar=function(){$modalService.show({templateUrl:"views/modal/crear-monitor.html",size:"md",scope:$scope},function($scope){return $scope.formMonitor.$invalid?void $modalService.incompleteForm():void $API.user().post(angular.extend($scope.form.data,{type:"monitor",username:$scope.form.data.email})).success(function(res){res&&($scope.records.push(res),$scope.$close(),delete $scope.form.data)})})},$scope.asociarRuta=function(){$modalService.show({templateUrl:"views/modal/asociar-ruta.html",size:"md",scope:$scope},function($scope){if($scope.formAsociarRuta.$invalid)return void $modalService.incompleteForm();$modalService.showLoading();var _request=[];angular.forEach($rootScope.items,function(item,key){_request.push($API.user(item._id).put($scope.form.data))}),$q.all(_request).then(function(res){res&&$timeout(function(){$scope.showLoader=!1,sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$window.modal.close(),$scope.$close(),$rootScope.clearSelection()},3e3)},function(){})})},$scope.actualizar=function(monitor){$scope.formEdit=new Object,$scope.formEdit=angular.copy(monitor),$scope.formEdit._route=$scope.formEdit._route?$scope.formEdit._route._id:null,$modalService.show({templateUrl:"views/modal/editar-monitor.html",scope:$scope},function($scope){return $scope.formEditMonitor.$invalid?void $modalService.incompleteForm():void $API.user(monitor._id).put($scope.formEdit).success(function(res){sweetAlert.swal("Registro Modificado","Registro modificado correctamente.","success"),$scope.load(),$scope.$close()})})},$scope.eliminar=function(monitor){$modalService.removeConfirm({},function(isConfirm){isConfirm&&$API.user(monitor._id)["delete"]().success(function(res){$scope.records.splice($scope.records.indexOf(monitor),1),sweetAlert.swal("Eliminado!","Registro Eliminado Correctamente.","success")})})}}function colegioCtrl($scope){$scope.usuarios=[{nombre:"La salle",apellido:"UrbanizaciÃ³n Seguros Tequendama, Cartagena, BolÃ­var",nombre_usuario:"Cartagena",codigo:"Bolivar",grado:"Colombia"},{nombre:"britanico ",apellido:"Cl. 7 #2-71",nombre_usuario:"Cartagena",codigo:"Bolivar",grado:"Colombia"}],$scope.agregar=function(){$scope.usuarios.push({nombre:$scope.nombre,apellido:$scope.apellido,nombre_usuario:$scope.nombre_usuario,codigo:$scope.codigo,grado:$scope.grado}),$("#modal_user").modal("hide"),$scope.nombre="",$scope.apellido="",$scope.nombre_usuario="",$scope.codigo="",$scope.grado=""},$scope.eliminar=function(text){for(i=0;i<$scope.usuarios.length;i++)$scope.usuarios[i].nombre_usuario===text&&$scope.usuarios.splice(i,1)}}function conductorCtrl($scope){$scope.monitor=[],$scope.monitores=[{nombres:"Julian",apellidos:" Garcia PeÃ±alosa",n_documento:"1.254.123.365",t_documento:"cedula",f_nacimiento:"25/05/90",imagen:"",direccion:"Manga 2da avenida",barrio:"Manga",ciudad:"Cartagena",pais:"Colombia",t_movil:"3004789632",t_fijo:"",email:"julain@gmail.com",nacionalidad:"Colombia",c_nacimiento:"BogotÃ¡",c_licencia:"1145789",categoria:"1A",arl:"sura",f_expedicion:"21/01/14",f_expiracion:"21/01/20",eps:"sura"},{nombres:"Margarita",apellidos:" Martinez Lozano",n_documento:"1.123.485.285",t_documento:"cedula",f_nacimiento:"14/04/92",imagen:"",direccion:"Pie de la popa 3da avenida n#35-20",barrio:"Pie de la popa",ciudad:"Cartagena",pais:"Colombia",t_movil:"3112587895",t_fijo:"66025478",email:"margui@gmail.com",nacionalidad:"Colombia",c_nacimiento:"Barranquilla",c_licencia:"54789632",categoria:"2A",arl:"Cafesalud",f_expedicion:"28/05/10",f_expiracion:"15/01/24",eps:"Concafan"}],$scope.agregar=function(){$scope.monitores.push({nombres:$scope.nombres,apellidos:$scope.apellidos,n_documento:$scope.n_documento,t_documento:$scope.t_documento,cedula:$scope.cedula,f_nacimiento:$scope.f_nacimiento,imagen:$scope.imagen,direccion:$scope.direccion,barrio:$scope.barrio,ciudad:$scope.ciudad,pais:$scope.pais,t_movil:$scope.t_movil,t_fijo:$scope.t_fijo,email:$scope.email,nacionalidad:$scope.nacionalidad,c_nacimiento:$scope.c_nacimiento,c_licencia:$scope.c_licencia,categoria:$scope.categoria,arl:$scope.arl,f_expedicion:$scope.f_expedicion,f_expiracion:$scope.f_expiracion,eps:$scope.eps}),$("#modal_user").modal("hide"),$scope.nombres="",$scope.apellidos="",$scope.n_documento="",$scope.t_documento="",$scope.cedula="",$scope.f_nacimiento="",$scope.imagen="",$scope.direccion="",$scope.barrio="",$scope.ciudad="",$scope.pais="",$scope.t_movil="",$scope.t_fijo="",$scope.email="",$scope.nacionalidad="",$scope.c_nacimiento="",$scope.c_licencia="",$scope.categoria="",$scope.arl="",$scope.f_expedicion="",$scope.f_expiracion="",$scope.eps=""},$scope.verParada=function(text){for($scope.monitor=[],i=0;i<$scope.monitores.length;i++)$scope.monitores[i].n_documento===text&&(console.log($scope.monitores[i].n_documento+" ="+text),$scope.monitor.push($scope.monitores[i]),console.log($scope.monitor[0]))},$scope.eliminar=function(text){for(i=0;i<$scope.monitores.length;i++)$scope.monitores[i].n_documento===text&&$scope.monitores.splice(i,1)},$scope.cambiausuario=function(usuario){$scope.usuario=usuario,$scope.usuarios=null}}function acudienteCtrl($scope,$API,$modalService,sweetAlert){$scope.records=[],$scope.Records=!1,$scope.load=function(){$API.user().get().success(function(res){$scope.Records=!0,$scope.records=res.filter(function(user){return"acudiente"==user.type})||[]})},$scope.agregar=function(){$modalService.show({templateUrl:"views/modal/crear-acudiente.html",size:"md",scope:$scope},function($scope){return $scope.formAcudiente.$invalid?void $modalService.incompleteForm():void $API.user().post(angular.extend($scope.form.data,{type:"acudiente",username:$scope.form.data.email,password:"123456"})).success(function(res){res&&($scope.load(),$scope.$close(),delete $scope.form.data)})})},$scope.actualizar=function(acudiente){$scope.formEdit=new Object,$scope.formEdit=angular.copy(acudiente),$modalService.show({templateUrl:"views/modal/editar-acudiente.html",scope:$scope},function($scope){return $scope.formEditAcudiente.$invalid?void $modalService.incompleteForm():void $API.user(acudiente._id).put($scope.formEdit).success(function(res){$scope.load(),delete $scope.formEdit.data,$scope.$close()})})},$scope.eliminar=function(acudiente){$modalService.removeConfirm({},function(isConfirm){isConfirm&&$API.user(acudiente._id)["delete"]().success(function(res){$scope.records.splice($scope.records.indexOf(acudiente),1),sweetAlert.swal("Eliminado!","Registro Eliminado Correctamente.","success")})})}}$(document).ready(function(){fixWrapperHeight(),setBodySmall()}),$(window).bind("load",function(){$(".splash").css("display","none")}),$(window).bind("resize click",function(){setBodySmall(),setTimeout(function(){fixWrapperHeight()},300)}),function(){angular.module("homer",["ui.router","ngSanitize","ui.bootstrap","angular-flot","angles","angular-peity","cgNotify","angles","ngAnimate","ui.map","ui.calendar","summernote","ngGrid","ui.tree","bm.bsTour","datatables","xeditable","ui.select","ui.sortable","ui.footable","angular-chartist","ui.codemirror","selectize"])}(),angular.module("homer").config(configState).run(function($rootScope,$state,editableOptions,$storage){$rootScope.$state=$state,editableOptions.theme="bs3",$rootScope.$on("$stateChangeStart",function(event,nextRoute,toParams,fromState,fromParams){$rootScope.items&&$rootScope.items.length>0&&$rootScope.clearSelection(),null!=nextRoute&&null!=nextRoute.access&&nextRoute.access.requiredAuthentication&&!$storage.get("token")&&(event.preventDefault(),$state.transitionTo("login",{targetUrl:nextRoute.name}))})}),angular.module("homer").filter("propsFilter",propsFilter),angular.module("homer").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("minimalizaMenu",minimalizaMenu).directive("sparkline",sparkline).directive("icheck",icheck).directive("panelTools",panelTools).directive("panelToolsFullscreen",panelToolsFullscreen).directive("smallHeader",smallHeader).directive("animatePanel",animatePanel).directive("landingScrollspy",landingScrollspy).directive("focus",focus),angular.module("homer").directive("rutaField",rutaField).directive("estudianteField",estudianteField).directive("busField",busField).directive("acudienteField",acudienteField).directive("monitorField",monitorField).directive("planViaje",planViaje).directive("paradaField",paradaField),angular.module("homer").controller("appCtrl",appCtrl),angular.module("homer").factory("sweetAlert",sweetAlert),angular.module("homer").service("$API",API),angular.module("homer").service("$MAILER",MAILER),
angular.module("homer").service("$account",account),angular.module("homer").service("$modalService",modalService),angular.module("homer").service("$storage",storage);var constants={base:"http://localhost:5000/api/"};angular.module("homer").constant("$constants",constants),angular.module("homer").controller("alertsCtrl",alertsCtrl),angular.module("homer").controller("modalCtrl",modalCtrl),angular.module("homer").controller("charts_flotCtrl",charts_flotCtrl),angular.module("homer").controller("chartjsCtrl",chartjsCtrl),angular.module("homer").controller("inlineChartsCtrl",inlineChartsCtrl),angular.module("homer").controller("clockCtrl",clockCtrl),angular.module("homer").controller("timelineCtrl",timelineCtrl),angular.module("homer").controller("googleMapCtrl",googleMapCtrl),angular.module("homer").controller("calendarCtrl",calendarCtrl),angular.module("homer").controller("editorCtrl",editorCtrl),angular.module("homer").controller("nggridCtrl",nggridCtrl),angular.module("homer").controller("nestableCtrl",nestableCtrl),angular.module("homer").controller("tourCtrl",tourCtrl),angular.module("homer").controller("datatablesCtrl",datatablesCtrl),angular.module("homer").controller("wizardOneCtrl",wizardOneCtrl),angular.module("homer").controller("formsCtrl",formsCtrl).controller("SelectLocalCtrl",SelectLocalCtrl).controller("RadiolistCtrl",RadiolistCtrl).controller("Html5InputsCtrl",Html5InputsCtrl).controller("DatepickerDemoCtrl",DatepickerDemoCtrl).controller("spinCtrl",spinCtrl),angular.module("homer").controller("validationCtrl",validationCtrl),angular.module("homer").controller("chartistCtrl",chartistCtrl),angular.module("homer").controller("codeEditorCtrl",codeEditorCtrl),angular.module("homer").directive("touchSpin",touchSpin),angular.module("homer").controller("loginCtrl",loginCtrl),angular.module("homer").controller("changePasswordCtrl",changePasswordCtrl),angular.module("homer").controller("headerCtrl",headerCtrl),angular.module("homer").controller("usuarioCtrl",usuarioCtrl),angular.module("homer").controller("studentCtrl",studentCtrl),angular.module("homer").controller("rutaCtrl",rutaCtrl),angular.module("homer").controller("paradaCtrl",paradaCtrl),angular.module("homer").controller("busCtrl",busCtrl),angular.module("homer").controller("asistenciaCtrl",asistenciaCtrl),angular.module("homer").controller("rutaEstudianteCtrl",rutaEstudianteCtrl),angular.module("homer").controller("trayectoCtrl",trayectoCtrl),angular.module("homer").controller("monitorCtrl",monitorCtrl),angular.module("homer").controller("colegioCtrl",colegioCtrl),angular.module("homer").controller("conductorCtrl",conductorCtrl),angular.module("homer").controller("acudienteCtrl",acudienteCtrl),function($,window,undefined){"use strict";var $special,resizeTimeout,$event=$.event;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(event,execAsap){var context=this,args=arguments,dispatch=function(){event.type="debouncedresize",$event.dispatch.apply(context,args)};resizeTimeout&&clearTimeout(resizeTimeout),execAsap?dispatch():resizeTimeout=setTimeout(dispatch,$special.threshold)},threshold:150};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(callback){function doneLoading(){var $proper=$(proper),$broken=$(broken);deferred&&(broken.length?deferred.reject($images,$proper,$broken):deferred.resolve($images)),$.isFunction(callback)&&callback.call($this,$images,$proper,$broken)}function imgLoaded(img,isBroken){img.src!==BLANK&&-1===$.inArray(img,loaded)&&(loaded.push(img),isBroken?broken.push(img):proper.push(img),$.data(img,"imagesLoaded",{isBroken:isBroken,src:img.src}),hasNotify&&deferred.notifyWith($(img),[isBroken,$images,$(proper),$(broken)]),$images.length===loaded.length&&(setTimeout(doneLoading),$images.unbind(".imagesLoaded")))}var $this=this,deferred=$.isFunction($.Deferred)?$.Deferred():0,hasNotify=$.isFunction(deferred.notify),$images=$this.find("img").add($this.filter("img")),loaded=[],proper=[],broken=[];return $.isPlainObject(callback)&&$.each(callback,function(key,value){"callback"===key?callback=value:deferred&&deferred[key](value)}),$images.length?$images.bind("load.imagesLoaded error.imagesLoaded",function(event){imgLoaded(event.target,"error"===event.type)}).each(function(i,el){var src=el.src,cached=$.data(el,"imagesLoaded");return cached&&cached.src===src?void imgLoaded(el,cached.isBroken):el.complete&&el.naturalWidth!==undefined?void imgLoaded(el,0===el.naturalWidth||0===el.naturalHeight):void((el.readyState||el.complete)&&(el.src=BLANK,el.src=src))}):doneLoading(),deferred?deferred.promise($this):$this};var $window=$(window),Modernizr=window.Modernizr;$.Elastislide=function(options,element){this.$el=$(element),this._init(options)},$.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(el,position,evt){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}},$.Elastislide.prototype={_init:function(options){this.options=$.extend(!0,{},$.Elastislide.defaults,options);var self=this,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return this.transEndEventName=transEndEventNames[Modernizr.prefixed("transition")],this.support=Modernizr.csstransitions&&Modernizr.csstransforms,this.current=this.options.start,this.isSliding=!1,this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount?!1:(this._validate(),this.$items.detach(),this.$el.empty(),this.$el.append(this.$items),this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>'),this.hasTransition=!1,this.hasTransitionTimeout=setTimeout(function(){self._addTransition()},100),void this.$el.imagesLoaded(function(){self.$el.show(),self._layout(),self._configure(),self.hasTransition?(self._removeTransition(),self._slideToItem(self.current),self.$el.on(self.transEndEventName,function(){self.$el.off(self.transEndEventName),self._setWrapperSize(),self._addTransition(),self._initEvents()})):(clearTimeout(self.hasTransitionTimeout),self._setWrapperSize(),self._initEvents(),self._slideToItem(self.current),setTimeout(function(){self._addTransition()},25)),self.options.onReady()}))},_validate:function(){this.options.speed<0&&(this.options.speed=500),(this.options.minItems<1||this.options.minItems>this.itemsCount)&&(this.options.minItems=1),(this.options.start<0||this.options.start>this.itemsCount-1)&&(this.options.start=0),"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>'),this.$carousel=this.$el.parent(),this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var $img=this.$items.find("img:first");this.imgSize={width:$img.outerWidth(!0),height:$img.outerHeight(!0)},this._setItemsSize(),"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height),this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing),this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s"),this.hasTransition=!1},_addControls:function(){var self=this;this.$navigation=$('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper),this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(event){return self._slide("prev"),!1}),this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(event){return self._slide("next"),!1})},_setItemsSize:function(){var w="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:w+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height}),"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var self=this;$window.on("debouncedresize.elastislide",function(){self._setItemsSize(),self._configure(),self._slideToItem(self.current)}),this.$el.on(this.transEndEventName,function(){self._onEndTransition()}),"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){self._slide("next")},swiperight:function(){self._slide("prev")}}):this.$el.on({swipeup:function(){self._slide("next")},swipedown:function(){self._slide("prev")}}),this.$el.on("click.elastislide","li",function(event){var $item=$(this);self.options.onClick($item,$item.index(),event)})},_destroy:function(callback){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide"),$window.off(".elastislide"),this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper),this.$items.css({width:"auto","max-width":"none","max-height":"none"}),this.$navigation.remove(),this.$wrapper.remove(),callback&&callback.call()},_toggleControls:function(dir,display){display?"next"===dir?this.$navNext.show():this.$navPrev.show():"next"===dir?this.$navNext.hide():this.$navPrev.hide()},_slide:function(dir,tvalue){if(this.isSliding)return!1;this.options.onBeforeSlide(),this.isSliding=!0;var self=this,translation=this.translation||0,itemSpace="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),totalSpace=this.itemsCount*itemSpace,visibleSpace="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(tvalue===undefined){var amount=this.fitCount*itemSpace;if(0>amount)return!1;if("next"===dir&&totalSpace-(Math.abs(translation)+amount)<visibleSpace)amount=totalSpace-(Math.abs(translation)+visibleSpace),this._toggleControls("next",!1),this._toggleControls("prev",!0);else if("prev"===dir&&Math.abs(translation)-amount<0)amount=Math.abs(translation),this._toggleControls("next",!0),this._toggleControls("prev",!1);else{var ftv="next"===dir?Math.abs(translation)+Math.abs(amount):Math.abs(translation)-Math.abs(amount);ftv>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),totalSpace-visibleSpace>ftv?this._toggleControls("next",!0):this._toggleControls("next",!1)}tvalue="next"===dir?translation-amount:translation+amount}else{var amount=Math.abs(tvalue);Math.max(totalSpace,visibleSpace)-amount<visibleSpace&&(tvalue=-(Math.max(totalSpace,visibleSpace)-visibleSpace)),amount>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),Math.max(totalSpace,visibleSpace)-visibleSpace>amount?this._toggleControls("next",!0):this._toggleControls("next",!1)}if(this.translation=tvalue,translation===tvalue)return this._onEndTransition(),!1;if(this.support)"horizontal"===this.options.orientation?this.$el.css("transform","translateX("+tvalue+"px)"):this.$el.css("transform","translateY("+tvalue+"px)");else{$.fn.applyStyle=this.hasTransition?$.fn.animate:$.fn.css;var styleCSS="horizontal"===this.options.orientation?{left:tvalue}:{top:tvalue};this.$el.stop().applyStyle(styleCSS,$.extend(!0,[],{duration:this.options.speed,complete:function(){self._onEndTransition()}}))}this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1,this.options.onAfterSlide()},_slideTo:function(pos){var pos=pos||this.current,translation=Math.abs(this.translation)||0,itemSpace="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),posR=translation+this.$carousel.width(),ftv=Math.abs(pos*itemSpace);(ftv+itemSpace>posR||translation>ftv)&&this._slideToItem(pos)},_slideToItem:function(pos){var amount="horizontal"===this.options.orientation?pos*this.$items.outerWidth(!0):pos*this.$items.outerHeight(!0);this._slide("",-amount)},add:function(callback){var self=this,oldcurrent=this.current,$currentItem=this.$items.eq(this.current);this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this.current=$currentItem.index(),this._setItemsSize(),this._configure(),this._removeTransition(),oldcurrent<this.current?this._slideToItem(this.current):this._slide("next",this.translation),setTimeout(function(){self._addTransition()},25),callback&&callback.call()},setCurrent:function(idx,callback){this.current=idx,this._slideTo(),callback&&callback.call()},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(callback){this._destroy(callback)}};var logError=function(message){window.console&&window.console.error(message)};$.fn.elastislide=function(options){var self=$.data(this,"elastislide");if("string"==typeof options){var args=Array.prototype.slice.call(arguments,1);this.each(function(){return self?$.isFunction(self[options])&&"_"!==options.charAt(0)?void self[options].apply(self,args):void logError("no such method '"+options+"' for elastislide self"):void logError("cannot call methods on elastislide prior to initialization; attempted to call method '"+options+"'")})}else this.each(function(){self?self._init():self=$.data(this,"elastislide",new $.Elastislide(options,this))});return self}}(jQuery,window);